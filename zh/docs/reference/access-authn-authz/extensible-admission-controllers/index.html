<!doctype html><html lang=zh class=no-js><head><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-36037335-10"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-36037335-10')</script><link rel=alternate hreflang=en href=https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.82.0"><link rel="shortcut icon" type=image/png href=/images/favicon.png><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=manifest href=/manifest.webmanifest><link rel=apple-touch-icon href=/images/kubernetes-192x192.png><title>动态准入控制 | Kubernetes</title><meta property="og:title" content="动态准入控制"><meta property="og:description" content="除了内置的 admission 插件， 准入插件可以作为扩展独立开发，并以运行时所配置的 Webhook 的形式运行。 此页面描述了如何构建、配置、使用和监视准入 Webhook。
什么是准入 Webhook？ 准入 Webhook 是一种用于接收准入请求并对其进行处理的 HTTP 回调机制。 可以定义两种类型的准入 webhook，即 验证性质的准入 Webhook 和 修改性质的准入 Webhook。 修改性质的准入 Webhook 会先被调用。它们可以更改发送到 API 服务器的对象以执行自定义的设置默认值操作。
在完成了所有对象修改并且 API 服务器也验证了所传入的对象之后， 验证性质的 Webhook 会被调用，并通过拒绝请求的方式来强制实施自定义的策略。
说明： 如果准入 Webhook 需要保证它们所看到的是对象的最终状态以实施某种策略。 则应使用验证性质的准入 Webhook，因为对象被修改性质 Webhook 看到之后仍然可能被修改。  尝试准入 Webhook 准入 Webhook 本质上是集群控制平面的一部分。你应该非常谨慎地编写和部署它们。 如果你打算编写或者部署生产级准入 webhook，请阅读用户指南以获取相关说明。 在下文中，我们将介绍如何快速试验准入 Webhook。
先决条件   确保 Kubernetes 集群版本至少为 v1.16（以便使用 admissionregistration.k8s.io/v1 API） 或者 v1.9 （以便使用 admissionregistration.k8s.io/v1beta1 API）。
  确保启用 MutatingAdmissionWebhook 和 ValidatingAdmissionWebhook 控制器。 这里 是一组推荐的 admission 控制器，通常可以启用。"><meta property="og:type" content="article"><meta property="og:url" content="https://kubernetes.io/zh/docs/reference/access-authn-authz/extensible-admission-controllers/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2020-12-04T18:22:25+08:00"><meta property="og:site_name" content="Kubernetes"><meta itemprop=name content="动态准入控制"><meta itemprop=description content="除了内置的 admission 插件， 准入插件可以作为扩展独立开发，并以运行时所配置的 Webhook 的形式运行。 此页面描述了如何构建、配置、使用和监视准入 Webhook。
什么是准入 Webhook？ 准入 Webhook 是一种用于接收准入请求并对其进行处理的 HTTP 回调机制。 可以定义两种类型的准入 webhook，即 验证性质的准入 Webhook 和 修改性质的准入 Webhook。 修改性质的准入 Webhook 会先被调用。它们可以更改发送到 API 服务器的对象以执行自定义的设置默认值操作。
在完成了所有对象修改并且 API 服务器也验证了所传入的对象之后， 验证性质的 Webhook 会被调用，并通过拒绝请求的方式来强制实施自定义的策略。
说明： 如果准入 Webhook 需要保证它们所看到的是对象的最终状态以实施某种策略。 则应使用验证性质的准入 Webhook，因为对象被修改性质 Webhook 看到之后仍然可能被修改。  尝试准入 Webhook 准入 Webhook 本质上是集群控制平面的一部分。你应该非常谨慎地编写和部署它们。 如果你打算编写或者部署生产级准入 webhook，请阅读用户指南以获取相关说明。 在下文中，我们将介绍如何快速试验准入 Webhook。
先决条件   确保 Kubernetes 集群版本至少为 v1.16（以便使用 admissionregistration.k8s.io/v1 API） 或者 v1.9 （以便使用 admissionregistration.k8s.io/v1beta1 API）。
  确保启用 MutatingAdmissionWebhook 和 ValidatingAdmissionWebhook 控制器。 这里 是一组推荐的 admission 控制器，通常可以启用。"><meta itemprop=dateModified content="2020-12-04T18:22:25+08:00"><meta itemprop=wordCount content="2458"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="动态准入控制"><meta name=twitter:description content="除了内置的 admission 插件， 准入插件可以作为扩展独立开发，并以运行时所配置的 Webhook 的形式运行。 此页面描述了如何构建、配置、使用和监视准入 Webhook。
什么是准入 Webhook？ 准入 Webhook 是一种用于接收准入请求并对其进行处理的 HTTP 回调机制。 可以定义两种类型的准入 webhook，即 验证性质的准入 Webhook 和 修改性质的准入 Webhook。 修改性质的准入 Webhook 会先被调用。它们可以更改发送到 API 服务器的对象以执行自定义的设置默认值操作。
在完成了所有对象修改并且 API 服务器也验证了所传入的对象之后， 验证性质的 Webhook 会被调用，并通过拒绝请求的方式来强制实施自定义的策略。
说明： 如果准入 Webhook 需要保证它们所看到的是对象的最终状态以实施某种策略。 则应使用验证性质的准入 Webhook，因为对象被修改性质 Webhook 看到之后仍然可能被修改。  尝试准入 Webhook 准入 Webhook 本质上是集群控制平面的一部分。你应该非常谨慎地编写和部署它们。 如果你打算编写或者部署生产级准入 webhook，请阅读用户指南以获取相关说明。 在下文中，我们将介绍如何快速试验准入 Webhook。
先决条件   确保 Kubernetes 集群版本至少为 v1.16（以便使用 admissionregistration.k8s.io/v1 API） 或者 v1.9 （以便使用 admissionregistration.k8s.io/v1beta1 API）。
  确保启用 MutatingAdmissionWebhook 和 ValidatingAdmissionWebhook 控制器。 这里 是一组推荐的 admission 控制器，通常可以启用。"><link rel=preload href=/scss/main.min.aeea2a074ae7ac3d467a0d6f52e45894b49452cbb3f0f410c268ec7280c5a653.css as=style><link href=/scss/main.min.aeea2a074ae7ac3d467a0d6f52e45894b49452cbb3f0f410c268ec7280c5a653.css rel=stylesheet integrity><script src=/js/jquery-3.3.1.min.js integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin=anonymous></script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","url":"https://kubernetes.io","logo":"https://kubernetes.io/images/favicon.png"}</script><meta name=theme-color content="#326ce5"><link rel=stylesheet href=/css/feature-states.css><meta name=description content="除了内置的 admission 插件， 准入插件可以作为扩展独立开发，并以运行时所配置的 Webhook 的形式运行。 此页面描述了如何构建、配置、使用和监视准入 Webhook。
什么是准入 Webhook？ 准入 Webhook 是一种用于接收准入请求并对其进行处理的 HTTP 回调机制。 可以定义两种类型的准入 webhook，即 验证性质的准入 Webhook 和 修改性质的准入 Webhook。 修改性质的准入 Webhook 会先被调用。它们可以更改发送到 API 服务器的对象以执行自定义的设置默认值操作。
在完成了所有对象修改并且 API 服务器也验证了所传入的对象之后， 验证性质的 Webhook 会被调用，并通过拒绝请求的方式来强制实施自定义的策略。
说明： 如果准入 Webhook 需要保证它们所看到的是对象的最终状态以实施某种策略。 则应使用验证性质的准入 Webhook，因为对象被修改性质 Webhook 看到之后仍然可能被修改。  尝试准入 Webhook 准入 Webhook 本质上是集群控制平面的一部分。你应该非常谨慎地编写和部署它们。 如果你打算编写或者部署生产级准入 webhook，请阅读用户指南以获取相关说明。 在下文中，我们将介绍如何快速试验准入 Webhook。
先决条件   确保 Kubernetes 集群版本至少为 v1.16（以便使用 admissionregistration.k8s.io/v1 API） 或者 v1.9 （以便使用 admissionregistration.k8s.io/v1beta1 API）。
  确保启用 MutatingAdmissionWebhook 和 ValidatingAdmissionWebhook 控制器。 这里 是一组推荐的 admission 控制器，通常可以启用。"><meta property="og:description" content="除了内置的 admission 插件， 准入插件可以作为扩展独立开发，并以运行时所配置的 Webhook 的形式运行。 此页面描述了如何构建、配置、使用和监视准入 Webhook。
什么是准入 Webhook？ 准入 Webhook 是一种用于接收准入请求并对其进行处理的 HTTP 回调机制。 可以定义两种类型的准入 webhook，即 验证性质的准入 Webhook 和 修改性质的准入 Webhook。 修改性质的准入 Webhook 会先被调用。它们可以更改发送到 API 服务器的对象以执行自定义的设置默认值操作。
在完成了所有对象修改并且 API 服务器也验证了所传入的对象之后， 验证性质的 Webhook 会被调用，并通过拒绝请求的方式来强制实施自定义的策略。
说明： 如果准入 Webhook 需要保证它们所看到的是对象的最终状态以实施某种策略。 则应使用验证性质的准入 Webhook，因为对象被修改性质 Webhook 看到之后仍然可能被修改。  尝试准入 Webhook 准入 Webhook 本质上是集群控制平面的一部分。你应该非常谨慎地编写和部署它们。 如果你打算编写或者部署生产级准入 webhook，请阅读用户指南以获取相关说明。 在下文中，我们将介绍如何快速试验准入 Webhook。
先决条件   确保 Kubernetes 集群版本至少为 v1.16（以便使用 admissionregistration.k8s.io/v1 API） 或者 v1.9 （以便使用 admissionregistration.k8s.io/v1beta1 API）。
  确保启用 MutatingAdmissionWebhook 和 ValidatingAdmissionWebhook 控制器。 这里 是一组推荐的 admission 控制器，通常可以启用。"><meta name=twitter:description content="除了内置的 admission 插件， 准入插件可以作为扩展独立开发，并以运行时所配置的 Webhook 的形式运行。 此页面描述了如何构建、配置、使用和监视准入 Webhook。
什么是准入 Webhook？ 准入 Webhook 是一种用于接收准入请求并对其进行处理的 HTTP 回调机制。 可以定义两种类型的准入 webhook，即 验证性质的准入 Webhook 和 修改性质的准入 Webhook。 修改性质的准入 Webhook 会先被调用。它们可以更改发送到 API 服务器的对象以执行自定义的设置默认值操作。
在完成了所有对象修改并且 API 服务器也验证了所传入的对象之后， 验证性质的 Webhook 会被调用，并通过拒绝请求的方式来强制实施自定义的策略。
说明： 如果准入 Webhook 需要保证它们所看到的是对象的最终状态以实施某种策略。 则应使用验证性质的准入 Webhook，因为对象被修改性质 Webhook 看到之后仍然可能被修改。  尝试准入 Webhook 准入 Webhook 本质上是集群控制平面的一部分。你应该非常谨慎地编写和部署它们。 如果你打算编写或者部署生产级准入 webhook，请阅读用户指南以获取相关说明。 在下文中，我们将介绍如何快速试验准入 Webhook。
先决条件   确保 Kubernetes 集群版本至少为 v1.16（以便使用 admissionregistration.k8s.io/v1 API） 或者 v1.9 （以便使用 admissionregistration.k8s.io/v1beta1 API）。
  确保启用 MutatingAdmissionWebhook 和 ValidatingAdmissionWebhook 控制器。 这里 是一组推荐的 admission 控制器，通常可以启用。"><meta property="og:url" content="https://kubernetes.io/zh/docs/reference/access-authn-authz/extensible-admission-controllers/"><meta property="og:title" content="动态准入控制"><meta name=twitter:title content="动态准入控制"><meta name=twitter:image content="https://kubernetes.io/images/favicon.png"><meta name=twitter:image:alt content="Kubernetes"><meta property="og:image" content="/images/kubernetes-horizontal-color.png"><meta property="og:type" content="article"><script src=/js/script.js></script><title>动态准入控制 | Kubernetes</title></head><body class="td-page td-documentation"><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-row td-navbar" data-auto-burger=primary><a class=navbar-brand href=/zh/></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-2 mb-lg-0"><a class="nav-link active" href=/zh/docs/>文档</span></a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh/blog/>Kubernetes 博客</span></a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh/training/>培训</span></a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh/partners/>合作伙伴</span></a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh/community/>社区</span></a></li><li class="nav-item mr-2 mb-lg-0"><a class=nav-link href=/zh/case-studies/>案例分析</span></a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>版本列表</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=https://kubernetes.io/zh/docs/reference/access-authn-authz/extensible-admission-controllers/>v1.24</a>
<a class=dropdown-item href=https://v1-23.docs.kubernetes.io/zh/docs/reference/access-authn-authz/extensible-admission-controllers/>v1.23</a>
<a class=dropdown-item href=https://v1-22.docs.kubernetes.io/zh/docs/reference/access-authn-authz/extensible-admission-controllers/>v1.22</a>
<a class=dropdown-item href=https://v1-21.docs.kubernetes.io/zh/docs/reference/access-authn-authz/extensible-admission-controllers/>v1.21</a>
<a class=dropdown-item href=https://v1-20.docs.kubernetes.io/zh/docs/reference/access-authn-authz/extensible-admission-controllers/>v1.20</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdownMenuLink role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>中文 Chinese</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/docs/reference/access-authn-authz/extensible-admission-controllers/>English</a></div></li></ul></div><button id=hamburger onclick=kub.toggleMenu() data-auto-burger-exclude><div></div></button></nav><div class=header-filler></div></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-md-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" name=q placeholder="&#xf002 搜索" aria-label=搜索 autocomplete=off>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3"><ul><li class="collapse show" id=zh-docs><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/home/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">主页</a></li><ul><li class=collapse id=zh-docs-home><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-home-supported-doc-versions href=/zh/docs/home/supported-doc-versions/>Kubernetes 文档支持的版本</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">入门</a></li><ul><li class=collapse id=zh-docs-setup><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/release/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Kubernetes 发行说明和版本偏差</a></li><ul><li class=collapse id=zh-docs-setup-release><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-release-notes href=/zh/docs/setup/release/notes/>v1.18 发布说明</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-release-version-skew-policy href=/zh/docs/setup/release/version-skew-policy/>Kubernetes 版本及版本偏差支持策略</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/learning-environment/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">学习环境</a></li><ul><li class=collapse id=zh-docs-setup-learning-environment></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/production-environment/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">生产环境</a></li><ul><li class=collapse id=zh-docs-setup-production-environment><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-container-runtimes href=/zh/docs/setup/production-environment/container-runtimes/>容器运行时</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-turnkey-solutions href=/zh/docs/setup/production-environment/turnkey-solutions/>Turnkey 云解决方案</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/production-environment/tools/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">使用部署工具安装 Kubernetes</a></li><ul><li class=collapse id=zh-docs-setup-production-environment-tools><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/production-environment/tools/kubeadm/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">使用 kubeadm 引导集群</a></li><ul><li class=collapse id=zh-docs-setup-production-environment-tools-kubeadm><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kubeadm-install-kubeadm href=/zh/docs/setup/production-environment/tools/kubeadm/install-kubeadm/>安装 kubeadm</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kubeadm-troubleshooting-kubeadm href=/zh/docs/setup/production-environment/tools/kubeadm/troubleshooting-kubeadm/>对 kubeadm 进行故障排查</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kubeadm-create-cluster-kubeadm href=/zh/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/>使用 kubeadm 创建集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kubeadm-control-plane-flags href=/zh/docs/setup/production-environment/tools/kubeadm/control-plane-flags/>使用 kubeadm 定制控制平面配置</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kubeadm-ha-topology href=/zh/docs/setup/production-environment/tools/kubeadm/ha-topology/>高可用拓扑选项</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kubeadm-high-availability href=/zh/docs/setup/production-environment/tools/kubeadm/high-availability/>利用 kubeadm 创建高可用集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kubeadm-setup-ha-etcd-with-kubeadm href=/zh/docs/setup/production-environment/tools/kubeadm/setup-ha-etcd-with-kubeadm/>使用 kubeadm 创建一个高可用 etcd 集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kubeadm-kubelet-integration href=/zh/docs/setup/production-environment/tools/kubeadm/kubelet-integration/>使用 kubeadm 配置集群中的每个 kubelet</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kubeadm-self-hosting href=/zh/docs/setup/production-environment/tools/kubeadm/self-hosting/>配置您的 kubernetes 集群以自托管控制平台</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kops href=/zh/docs/setup/production-environment/tools/kops/>使用 Kops 安装 Kubernetes</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-tools-kubespray href=/zh/docs/setup/production-environment/tools/kubespray/>使用 Kubespray 安装 Kubernetes</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/production-environment/windows/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Windows Kubernetes</a></li><ul><li class=collapse id=zh-docs-setup-production-environment-windows><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-windows-intro-windows-in-kubernetes href=/zh/docs/setup/production-environment/windows/intro-windows-in-kubernetes/>Kubernetes 对 Windows 的支持</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-production-environment-windows-user-guide-windows-containers href=/zh/docs/setup/production-environment/windows/user-guide-windows-containers/>Kubernetes 中调度 Windows 容器的指南</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/setup/best-practices/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">最佳实践</a></li><ul><li class=collapse id=zh-docs-setup-best-practices><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-best-practices-multiple-zones href=/zh/docs/setup/best-practices/multiple-zones/>运行于多区环境</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-best-practices-cluster-large href=/zh/docs/setup/best-practices/cluster-large/>创建大型集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-best-practices-node-conformance href=/zh/docs/setup/best-practices/node-conformance/>校验节点设置</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-setup-best-practices-certificates href=/zh/docs/setup/best-practices/certificates/>PKI 证书和要求</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">概念</a></li><ul><li class=collapse id=zh-docs-concepts><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/overview/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">概述</a></li><ul><li class=collapse id=zh-docs-concepts-overview><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-what-is-kubernetes href=/zh/docs/concepts/overview/what-is-kubernetes/>Kubernetes 是什么？</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-components href=/zh/docs/concepts/overview/components/>Kubernetes 组件</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-kubernetes-api href=/zh/docs/concepts/overview/kubernetes-api/>Kubernetes API</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/overview/working-with-objects/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">使用 Kubernetes 对象</a></li><ul><li class=collapse id=zh-docs-concepts-overview-working-with-objects><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-working-with-objects-kubernetes-objects href=/zh/docs/concepts/overview/working-with-objects/kubernetes-objects/>理解 Kubernetes 对象</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-working-with-objects-object-management href=/zh/docs/concepts/overview/working-with-objects/object-management/>Kubernetes 对象管理</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-working-with-objects-names href=/zh/docs/concepts/overview/working-with-objects/names/>对象名称和 IDs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-working-with-objects-namespaces href=/zh/docs/concepts/overview/working-with-objects/namespaces/>名字空间</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-working-with-objects-labels href=/zh/docs/concepts/overview/working-with-objects/labels/>标签和选择算符</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-working-with-objects-annotations href=/zh/docs/concepts/overview/working-with-objects/annotations/>注解</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-working-with-objects-field-selectors href=/zh/docs/concepts/overview/working-with-objects/field-selectors/>字段选择器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-overview-working-with-objects-common-labels href=/zh/docs/concepts/overview/working-with-objects/common-labels/>推荐使用的标签</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/architecture/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Kubernetes 架构</a></li><ul><li class=collapse id=zh-docs-concepts-architecture><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-architecture-nodes href=/zh/docs/concepts/architecture/nodes/>节点</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-architecture-control-plane-node-communication href=/zh/docs/concepts/architecture/control-plane-node-communication/>控制面到节点通信</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-architecture-controller href=/zh/docs/concepts/architecture/controller/>控制器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-architecture-cloud-controller href=/zh/docs/concepts/architecture/cloud-controller/>云控制器管理器的基础概念</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/containers/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">容器</a></li><ul><li class=collapse id=zh-docs-concepts-containers><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-containers-images href=/zh/docs/concepts/containers/images/>镜像</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-containers-container-environment href=/zh/docs/concepts/containers/container-environment/>容器环境</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-containers-runtime-class href=/zh/docs/concepts/containers/runtime-class/>容器运行时类(Runtime Class)</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-containers-container-lifecycle-hooks href=/zh/docs/concepts/containers/container-lifecycle-hooks/>容器生命周期回调</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/workloads/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">工作负载</a></li><ul><li class=collapse id=zh-docs-concepts-workloads><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/workloads/pods/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Pods</a></li><ul><li class=collapse id=zh-docs-concepts-workloads-pods><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-pods-pod-lifecycle href=/zh/docs/concepts/workloads/pods/pod-lifecycle/>Pod 的生命周期</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-pods-init-containers href=/zh/docs/concepts/workloads/pods/init-containers/>Init 容器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-pods-pod-topology-spread-constraints href=/zh/docs/concepts/workloads/pods/pod-topology-spread-constraints/>Pod 拓扑分布约束</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-pods-disruptions href=/zh/docs/concepts/workloads/pods/disruptions/>干扰（Disruptions）</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-pods-ephemeral-containers href=/zh/docs/concepts/workloads/pods/ephemeral-containers/>临时容器</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/workloads/controllers/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">工作负载资源</a></li><ul><li class=collapse id=zh-docs-concepts-workloads-controllers><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-controllers-deployment href=/zh/docs/concepts/workloads/controllers/deployment/>Deployments</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-controllers-replicaset href=/zh/docs/concepts/workloads/controllers/replicaset/>ReplicaSet</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-controllers-statefulset href=/zh/docs/concepts/workloads/controllers/statefulset/>StatefulSets</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-controllers-daemonset href=/zh/docs/concepts/workloads/controllers/daemonset/>DaemonSet</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-controllers-job href=/zh/docs/concepts/workloads/controllers/job/>Jobs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-controllers-garbage-collection href=/zh/docs/concepts/workloads/controllers/garbage-collection/>垃圾收集</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-controllers-ttlafterfinished href=/zh/docs/concepts/workloads/controllers/ttlafterfinished/>已完成资源的 TTL 控制器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-controllers-cron-jobs href=/zh/docs/concepts/workloads/controllers/cron-jobs/>CronJob</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-workloads-controllers-replicationcontroller href=/zh/docs/concepts/workloads/controllers/replicationcontroller/>ReplicationController</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/services-networking/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">服务、负载均衡和联网</a></li><ul><li class=collapse id=zh-docs-concepts-services-networking><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-service href=/zh/docs/concepts/services-networking/service/>服务</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-service-topology href=/zh/docs/concepts/services-networking/service-topology/>服务拓扑（Service Topology）</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-dns-pod-service href=/zh/docs/concepts/services-networking/dns-pod-service/>Pod 与 Service 的 DNS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-connect-applications-service href=/zh/docs/concepts/services-networking/connect-applications-service/>使用 Service 连接到应用</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-endpoint-slices href=/zh/docs/concepts/services-networking/endpoint-slices/>端点切片（Endpoint Slices）</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-ingress href=/zh/docs/concepts/services-networking/ingress/>Ingress</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-ingress-controllers href=/zh/docs/concepts/services-networking/ingress-controllers/>Ingress 控制器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-network-policies href=/zh/docs/concepts/services-networking/network-policies/>网络策略</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-add-entries-to-pod-etc-hosts-with-host-aliases href=/zh/docs/concepts/services-networking/add-entries-to-pod-etc-hosts-with-host-aliases/>使用 HostAliases 向 Pod /etc/hosts 文件添加条目</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-services-networking-dual-stack href=/zh/docs/concepts/services-networking/dual-stack/>IPv4/IPv6 双协议栈</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/storage/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">存储</a></li><ul><li class=collapse id=zh-docs-concepts-storage><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-storage-volumes href=/zh/docs/concepts/storage/volumes/>卷</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-storage-volume-snapshots href=/zh/docs/concepts/storage/volume-snapshots/>卷快照</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-storage-persistent-volumes href=/zh/docs/concepts/storage/persistent-volumes/>持久卷</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-storage-volume-pvc-datasource href=/zh/docs/concepts/storage/volume-pvc-datasource/>CSI 卷克隆</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-storage-volume-snapshot-classes href=/zh/docs/concepts/storage/volume-snapshot-classes/>卷快照类</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-storage-storage-classes href=/zh/docs/concepts/storage/storage-classes/>存储类</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-storage-dynamic-provisioning href=/zh/docs/concepts/storage/dynamic-provisioning/>动态卷供应</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-storage-storage-capacity href=/zh/docs/concepts/storage/storage-capacity/>存储容量</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-storage-ephemeral-volumes href=/zh/docs/concepts/storage/ephemeral-volumes/>临时卷</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-storage-storage-limits href=/zh/docs/concepts/storage/storage-limits/>特定于节点的卷数限制</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/configuration/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">配置</a></li><ul><li class=collapse id=zh-docs-concepts-configuration><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-configuration-overview href=/zh/docs/concepts/configuration/overview/>配置最佳实践</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-configuration-configmap href=/zh/docs/concepts/configuration/configmap/>ConfigMap</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-configuration-secret href=/zh/docs/concepts/configuration/secret/>Secret</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-configuration-manage-resources-containers href=/zh/docs/concepts/configuration/manage-resources-containers/>为容器管理资源</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-configuration-organize-cluster-access-kubeconfig href=/zh/docs/concepts/configuration/organize-cluster-access-kubeconfig/>使用 kubeconfig 文件组织集群访问</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-configuration-pod-priority-preemption href=/zh/docs/concepts/configuration/pod-priority-preemption/>Pod 优先级与抢占</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/security/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">安全</a></li><ul><li class=collapse id=zh-docs-concepts-security><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-security-pod-security-standards href=/zh/docs/concepts/security/pod-security-standards/>Pod 安全性标准</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-security-overview href=/zh/docs/concepts/security/overview/>云原生安全概述</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-security-controlling-access href=/zh/docs/concepts/security/controlling-access/>Kubernetes API 访问控制</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/policy/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">策略</a></li><ul><li class=collapse id=zh-docs-concepts-policy><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-policy-limit-range href=/zh/docs/concepts/policy/limit-range/>限制范围</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-policy-resource-quotas href=/zh/docs/concepts/policy/resource-quotas/>资源配额</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-policy-pod-security-policy href=/zh/docs/concepts/policy/pod-security-policy/>Pod 安全策略</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-policy-pid-limiting href=/zh/docs/concepts/policy/pid-limiting/>进程 ID 约束与预留</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/scheduling-eviction/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">调度和驱逐 (Scheduling and Eviction)</a></li><ul><li class=collapse id=zh-docs-concepts-scheduling-eviction><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-scheduling-eviction-pod-overhead href=/zh/docs/concepts/scheduling-eviction/pod-overhead/>Pod 开销</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-scheduling-eviction-taint-and-toleration href=/zh/docs/concepts/scheduling-eviction/taint-and-toleration/>污点和容忍度</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-scheduling-eviction-kube-scheduler href=/zh/docs/concepts/scheduling-eviction/kube-scheduler/>Kubernetes 调度器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-scheduling-eviction-assign-pod-node href=/zh/docs/concepts/scheduling-eviction/assign-pod-node/>将 Pod 分配给节点</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-scheduling-eviction-resource-bin-packing href=/zh/docs/concepts/scheduling-eviction/resource-bin-packing/>扩展资源的资源装箱</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-scheduling-eviction-eviction-policy href=/zh/docs/concepts/scheduling-eviction/eviction-policy/>驱逐策略</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-scheduling-eviction-scheduling-framework href=/zh/docs/concepts/scheduling-eviction/scheduling-framework/>调度框架</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-scheduling-eviction-scheduler-perf-tuning href=/zh/docs/concepts/scheduling-eviction/scheduler-perf-tuning/>调度器性能调优</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/cluster-administration/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">集群管理</a></li><ul><li class=collapse id=zh-docs-concepts-cluster-administration><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-certificates href=/zh/docs/concepts/cluster-administration/certificates/>证书</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-manage-deployment href=/zh/docs/concepts/cluster-administration/manage-deployment/>管理资源</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-networking href=/zh/docs/concepts/cluster-administration/networking/>集群网络系统</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-system-metrics href=/zh/docs/concepts/cluster-administration/system-metrics/>Kubernetes 系统组件指标</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-logging href=/zh/docs/concepts/cluster-administration/logging/>日志架构</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-system-logs href=/zh/docs/concepts/cluster-administration/system-logs/>系统日志</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-kubelet-garbage-collection href=/zh/docs/concepts/cluster-administration/kubelet-garbage-collection/>容器镜像的垃圾收集</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-proxies href=/zh/docs/concepts/cluster-administration/proxies/>Kubernetes 中的代理</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-flow-control href=/zh/docs/concepts/cluster-administration/flow-control/>API 优先级和公平性</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-cluster-administration-addons href=/zh/docs/concepts/cluster-administration/addons/>安装扩展（Addons）</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/extend-kubernetes/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">扩展 Kubernetes</a></li><ul><li class=collapse id=zh-docs-concepts-extend-kubernetes><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-extend-kubernetes-extend-cluster href=/zh/docs/concepts/extend-kubernetes/extend-cluster/>扩展 Kubernetes 集群</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/extend-kubernetes/api-extension/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">扩展 Kubernetes API</a></li><ul><li class=collapse id=zh-docs-concepts-extend-kubernetes-api-extension><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-extend-kubernetes-api-extension-custom-resources href=/zh/docs/concepts/extend-kubernetes/api-extension/custom-resources/>定制资源</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-extend-kubernetes-api-extension-apiserver-aggregation href=/zh/docs/concepts/extend-kubernetes/api-extension/apiserver-aggregation/>通过聚合层扩展 Kubernetes API</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-extend-kubernetes-operator href=/zh/docs/concepts/extend-kubernetes/operator/>Operator 模式</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/concepts/extend-kubernetes/compute-storage-net/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">计算、存储和网络扩展</a></li><ul><li class=collapse id=zh-docs-concepts-extend-kubernetes-compute-storage-net><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-extend-kubernetes-compute-storage-net-network-plugins href=/zh/docs/concepts/extend-kubernetes/compute-storage-net/network-plugins/>网络插件</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-extend-kubernetes-compute-storage-net-device-plugins href=/zh/docs/concepts/extend-kubernetes/compute-storage-net/device-plugins/>设备插件</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-concepts-extend-kubernetes-service-catalog href=/zh/docs/concepts/extend-kubernetes/service-catalog/>服务目录</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">任务</a></li><ul><li class=collapse id=zh-docs-tasks><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/tools/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">安装工具</a></li><ul><li class=collapse id=zh-docs-tasks-tools><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-tools-install-kubectl-windows target=_blank href=/docs/tasks/tools/install-kubectl-windows/>Install and Set Up kubectl on Windows <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-tools-install-kubectl-linux href=/zh/docs/tasks/tools/install-kubectl-linux/>在 Linux 系统中安装并设置 kubectl</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-tools-install-kubectl-macos href=/zh/docs/tasks/tools/install-kubectl-macos/>在 macOS 系统上安装和设置 kubectl</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-tools-install-kubectl href=/zh/docs/tasks/tools/install-kubectl/>安装并配置 kubectl</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-tools-included-optional-kubectl-configs-bash-linux href=/zh/docs/tasks/tools/included/optional-kubectl-configs-bash-linux/>Linux 系统中的 bash 自动补全功能</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-tools-included-optional-kubectl-configs-bash-mac href=/zh/docs/tasks/tools/included/optional-kubectl-configs-bash-mac/>macOS 系统上的 bash 自动补全</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/tasks/tools/included/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Tools Included</a></li><ul><li class=collapse id=docs-tasks-tools-included><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-tools-included-optional-kubectl-configs-bash-linux target=_blank href=/docs/tasks/tools/included/optional-kubectl-configs-bash-linux/>bash auto-completion on Linux <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-tools-included-optional-kubectl-configs-bash-mac target=_blank href=/docs/tasks/tools/included/optional-kubectl-configs-bash-mac/>bash auto-completion on macOS <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-tools-included-install-kubectl-gcloud target=_blank href=/docs/tasks/tools/included/install-kubectl-gcloud/>gcloud kubectl install <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-tools-included-verify-kubectl target=_blank href=/docs/tasks/tools/included/verify-kubectl/>verify kubectl install <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-tools-included-kubectl-whats-next target=_blank href=/docs/tasks/tools/included/kubectl-whats-next/>What's next? <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-tools-included-optional-kubectl-configs-zsh target=_blank href=/docs/tasks/tools/included/optional-kubectl-configs-zsh/>zsh auto-completion <small>(EN)</small></a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-tools-included-optional-kubectl-configs-zsh href=/zh/docs/tasks/tools/included/optional-kubectl-configs-zsh/>zsh 自动补全</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-tools-included-kubectl-whats-next href=/zh/docs/tasks/tools/included/kubectl-whats-next/>后续内容</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-tools-included-install-kubectl-gcloud href=/zh/docs/tasks/tools/included/install-kubectl-gcloud/>通过 gcloud 安装 kubectl</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-tools-included-verify-kubectl href=/zh/docs/tasks/tools/included/verify-kubectl/>验证 kubectl 的安装效果</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/administer-cluster/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">管理集群</a></li><ul><li class=collapse id=zh-docs-tasks-administer-cluster><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/administer-cluster/migrating-from-dockershim/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">从 dockershim 迁移</a></li><ul><li class=collapse id=zh-docs-tasks-administer-cluster-migrating-from-dockershim><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-migrating-from-dockershim-check-if-dockershim-deprecation-affects-you href=/zh/docs/tasks/administer-cluster/migrating-from-dockershim/check-if-dockershim-deprecation-affects-you/>检查弃用 Dockershim 对你的影响</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-migrating-from-dockershim-migrating-telemetry-and-security-agents href=/zh/docs/tasks/administer-cluster/migrating-from-dockershim/migrating-telemetry-and-security-agents/>从 dockershim 迁移遥测和安全代理</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/administer-cluster/kubeadm/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">用 kubeadm 进行管理</a></li><ul><li class=collapse id=zh-docs-tasks-administer-cluster-kubeadm><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-kubeadm-kubeadm-certs href=/zh/docs/tasks/administer-cluster/kubeadm/kubeadm-certs/>使用 kubeadm 进行证书管理</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-kubeadm-kubeadm-upgrade href=/zh/docs/tasks/administer-cluster/kubeadm/kubeadm-upgrade/>升级 kubeadm 集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-kubeadm-adding-windows-nodes href=/zh/docs/tasks/administer-cluster/kubeadm/adding-windows-nodes/>添加 Windows 节点</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-kubeadm-upgrading-windows-nodes href=/zh/docs/tasks/administer-cluster/kubeadm/upgrading-windows-nodes/>升级 Windows 节点</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/administer-cluster/manage-resources/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">管理内存，CPU 和 API 资源</a></li><ul><li class=collapse id=zh-docs-tasks-administer-cluster-manage-resources><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-manage-resources-memory-default-namespace href=/zh/docs/tasks/administer-cluster/manage-resources/memory-default-namespace/>为命名空间配置默认的内存请求和限制</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-manage-resources-cpu-default-namespace href=/zh/docs/tasks/administer-cluster/manage-resources/cpu-default-namespace/>为命名空间配置默认的 CPU 请求和限制</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-manage-resources-memory-constraint-namespace href=/zh/docs/tasks/administer-cluster/manage-resources/memory-constraint-namespace/>配置命名空间的最小和最大内存约束</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-manage-resources-cpu-constraint-namespace href=/zh/docs/tasks/administer-cluster/manage-resources/cpu-constraint-namespace/>为命名空间配置 CPU 最小和最大约束</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-manage-resources-quota-memory-cpu-namespace href=/zh/docs/tasks/administer-cluster/manage-resources/quota-memory-cpu-namespace/>为命名空间配置内存和 CPU 配额</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-manage-resources-quota-pod-namespace href=/zh/docs/tasks/administer-cluster/manage-resources/quota-pod-namespace/>配置命名空间下 Pod 配额</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-certificates href=/zh/docs/tasks/administer-cluster/certificates/>证书</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/administer-cluster/network-policy-provider/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">安装网络规则驱动</a></li><ul><li class=collapse id=zh-docs-tasks-administer-cluster-network-policy-provider><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-network-policy-provider-calico-network-policy href=/zh/docs/tasks/administer-cluster/network-policy-provider/calico-network-policy/>使用 Calico 提供 NetworkPolicy</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-network-policy-provider-cilium-network-policy href=/zh/docs/tasks/administer-cluster/network-policy-provider/cilium-network-policy/>使用 Cilium 提供 NetworkPolicy</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-network-policy-provider-kube-router-network-policy href=/zh/docs/tasks/administer-cluster/network-policy-provider/kube-router-network-policy/>使用 kube-router 提供 NetworkPolicy</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-network-policy-provider-romana-network-policy href=/zh/docs/tasks/administer-cluster/network-policy-provider/romana-network-policy/>使用 Romana 提供 NetworkPolicy</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-network-policy-provider-weave-network-policy href=/zh/docs/tasks/administer-cluster/network-policy-provider/weave-network-policy/>使用 Weave Net 提供 NetworkPolicy</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-ip-masq-agent href=/zh/docs/tasks/administer-cluster/ip-masq-agent/>IP Masquerade Agent 用户指南</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-running-cloud-controller href=/zh/docs/tasks/administer-cluster/running-cloud-controller/>Kubernetes 云管理控制器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-configure-upgrade-etcd href=/zh/docs/tasks/administer-cluster/configure-upgrade-etcd/>为 Kubernetes 运行 etcd 集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-reserve-compute-resources href=/zh/docs/tasks/administer-cluster/reserve-compute-resources/>为系统守护进程预留计算资源</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-extended-resource-node href=/zh/docs/tasks/administer-cluster/extended-resource-node/>为节点发布扩展资源</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-coredns href=/zh/docs/tasks/administer-cluster/coredns/>使用 CoreDNS 进行服务发现</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-kms-provider href=/zh/docs/tasks/administer-cluster/kms-provider/>使用 KMS 驱动进行数据加密</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-access-cluster-api href=/zh/docs/tasks/administer-cluster/access-cluster-api/>使用 Kubernetes API 访问集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-securing-a-cluster href=/zh/docs/tasks/administer-cluster/securing-a-cluster/>保护集群安全</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-guaranteed-scheduling-critical-addon-pods href=/zh/docs/tasks/administer-cluster/guaranteed-scheduling-critical-addon-pods/>关键插件 Pod 的调度保证</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-cluster-upgrade href=/zh/docs/tasks/administer-cluster/cluster-upgrade/>升级集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-namespaces-walkthrough href=/zh/docs/tasks/administer-cluster/namespaces-walkthrough/>名字空间演练</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-enabling-endpointslices href=/zh/docs/tasks/administer-cluster/enabling-endpointslices/>启用 EndpointSlices</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-enable-disable-api href=/zh/docs/tasks/administer-cluster/enable-disable-api/>启用/禁用 Kubernetes API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-nodelocaldns href=/zh/docs/tasks/administer-cluster/nodelocaldns/>在 Kubernetes 集群中使用 NodeLocal DNSCache</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-sysctl-cluster href=/zh/docs/tasks/administer-cluster/sysctl-cluster/>在 Kubernetes 集群中使用 sysctl</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-reconfigure-kubelet href=/zh/docs/tasks/administer-cluster/reconfigure-kubelet/>在运行中的集群上重新配置节点的 kubelet</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-declare-network-policy href=/zh/docs/tasks/administer-cluster/declare-network-policy/>声明网络策略</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-safely-drain-node href=/zh/docs/tasks/administer-cluster/safely-drain-node/>安全地清空一个节点</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-developing-cloud-controller-manager href=/zh/docs/tasks/administer-cluster/developing-cloud-controller-manager/>开发云控制器管理器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-enabling-service-topology href=/zh/docs/tasks/administer-cluster/enabling-service-topology/>开启服务拓扑</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-cpu-management-policies href=/zh/docs/tasks/administer-cluster/cpu-management-policies/>控制节点上的 CPU 管理策略</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-topology-manager href=/zh/docs/tasks/administer-cluster/topology-manager/>控制节点上的拓扑管理策略</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-highly-available-master href=/zh/docs/tasks/administer-cluster/highly-available-master/>搭建高可用的 Kubernetes Masters</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-change-default-storage-class href=/zh/docs/tasks/administer-cluster/change-default-storage-class/>改变默认 StorageClass</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-change-pv-reclaim-policy href=/zh/docs/tasks/administer-cluster/change-pv-reclaim-policy/>更改 PersistentVolume 的回收策略</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-dns-horizontal-autoscaling href=/zh/docs/tasks/administer-cluster/dns-horizontal-autoscaling/>自动扩缩集群 DNS 服务</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-dns-custom-nameservers href=/zh/docs/tasks/administer-cluster/dns-custom-nameservers/>自定义 DNS 服务</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-access-cluster-services href=/zh/docs/tasks/administer-cluster/access-cluster-services/>访问集群上运行的服务</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-dns-debugging-resolution href=/zh/docs/tasks/administer-cluster/dns-debugging-resolution/>调试 DNS 问题</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-namespaces href=/zh/docs/tasks/administer-cluster/namespaces/>通过名字空间共享集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-kubelet-config-file href=/zh/docs/tasks/administer-cluster/kubelet-config-file/>通过配置文件设置 Kubelet 参数</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-quota-api-object href=/zh/docs/tasks/administer-cluster/quota-api-object/>配置 API 对象配额</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-out-of-resource href=/zh/docs/tasks/administer-cluster/out-of-resource/>配置资源不足时的处理方式</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-limit-storage-consumption href=/zh/docs/tasks/administer-cluster/limit-storage-consumption/>限制存储消耗</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-administer-cluster-encrypt-data href=/zh/docs/tasks/administer-cluster/encrypt-data/>静态加密 Secret 数据</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/configure-pod-container/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">配置 Pods 和容器</a></li><ul><li class=collapse id=zh-docs-tasks-configure-pod-container><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-assign-memory-resource href=/zh/docs/tasks/configure-pod-container/assign-memory-resource/>为容器和 Pod 分配内存资源</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-configure-gmsa href=/zh/docs/tasks/configure-pod-container/configure-gmsa/>为 Windows Pod 和容器配置 GMSA</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-configure-runasusername href=/zh/docs/tasks/configure-pod-container/configure-runasusername/>为 Windows 的 Pod 和容器配置 RunAsUserName</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-assign-cpu-resource href=/zh/docs/tasks/configure-pod-container/assign-cpu-resource/>为容器和 Pods 分配 CPU 资源</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-quality-service-pod href=/zh/docs/tasks/configure-pod-container/quality-service-pod/>配置 Pod 的服务质量</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-extended-resource href=/zh/docs/tasks/configure-pod-container/extended-resource/>为容器分派扩展资源</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-configure-volume-storage href=/zh/docs/tasks/configure-pod-container/configure-volume-storage/>配置 Pod 以使用卷进行存储</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-configure-persistent-volume-storage href=/zh/docs/tasks/configure-pod-container/configure-persistent-volume-storage/>配置 Pod 以使用 PersistentVolume 作为存储</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-configure-projected-volume-storage href=/zh/docs/tasks/configure-pod-container/configure-projected-volume-storage/>配置 Pod 使用投射卷作存储</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-security-context href=/zh/docs/tasks/configure-pod-container/security-context/>为 Pod 或容器配置安全性上下文</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-configure-service-account href=/zh/docs/tasks/configure-pod-container/configure-service-account/>为 Pod 配置服务账户</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-pull-image-private-registry href=/zh/docs/tasks/configure-pod-container/pull-image-private-registry/>从私有仓库拉取镜像</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-configure-liveness-readiness-startup-probes href=/zh/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/>配置存活、就绪和启动探测器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-assign-pods-nodes href=/zh/docs/tasks/configure-pod-container/assign-pods-nodes/>将 Pod 分配给节点</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-assign-pods-nodes-using-node-affinity href=/zh/docs/tasks/configure-pod-container/assign-pods-nodes-using-node-affinity/>用节点亲和性把 Pods 分配到节点</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-configure-pod-initialization href=/zh/docs/tasks/configure-pod-container/configure-pod-initialization/>配置 Pod 初始化</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-attach-handler-lifecycle-event href=/zh/docs/tasks/configure-pod-container/attach-handler-lifecycle-event/>为容器的生命周期事件设置处理函数</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-configure-pod-configmap href=/zh/docs/tasks/configure-pod-container/configure-pod-configmap/>配置 Pod 使用 ConfigMap</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-share-process-namespace href=/zh/docs/tasks/configure-pod-container/share-process-namespace/>在 Pod 中的容器之间共享进程命名空间</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-static-pod href=/zh/docs/tasks/configure-pod-container/static-pod/>创建静态 Pod</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configure-pod-container-translate-compose-kubernetes href=/zh/docs/tasks/configure-pod-container/translate-compose-kubernetes/>将 Docker Compose 文件转换为 Kubernetes 资源</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/manage-kubernetes-objects/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">管理 Kubernetes 对象</a></li><ul><li class=collapse id=zh-docs-tasks-manage-kubernetes-objects><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-manage-kubernetes-objects-declarative-config href=/zh/docs/tasks/manage-kubernetes-objects/declarative-config/>使用配置文件对 Kubernetes 对象进行声明式管理</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-manage-kubernetes-objects-kustomization href=/zh/docs/tasks/manage-kubernetes-objects/kustomization/>使用 Kustomize 对 Kubernetes 对象进行声明式管理</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-manage-kubernetes-objects-imperative-command href=/zh/docs/tasks/manage-kubernetes-objects/imperative-command/>使用指令式命令管理 Kubernetes 对象</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-manage-kubernetes-objects-imperative-config href=/zh/docs/tasks/manage-kubernetes-objects/imperative-config/>使用配置文件对 Kubernetes 对象进行命令式管理</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-manage-kubernetes-objects-update-api-object-kubectl-patch href=/zh/docs/tasks/manage-kubernetes-objects/update-api-object-kubectl-patch/>使用 kubectl patch 更新 API 对象</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/configmap-secret/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">管理 Secrets</a></li><ul><li class=collapse id=zh-docs-tasks-configmap-secret><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configmap-secret-managing-secret-using-kubectl href=/zh/docs/tasks/configmap-secret/managing-secret-using-kubectl/>使用 kubectl 管理 Secret</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configmap-secret-managing-secret-using-config-file href=/zh/docs/tasks/configmap-secret/managing-secret-using-config-file/>使用配置文件管理 Secret</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-configmap-secret-managing-secret-using-kustomize href=/zh/docs/tasks/configmap-secret/managing-secret-using-kustomize/>使用 Kustomize 管理 Secret</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/inject-data-application/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">给应用注入数据</a></li><ul><li class=collapse id=zh-docs-tasks-inject-data-application><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-inject-data-application-define-command-argument-container href=/zh/docs/tasks/inject-data-application/define-command-argument-container/>为容器设置启动时要执行的命令和参数</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-inject-data-application-define-environment-variable-container href=/zh/docs/tasks/inject-data-application/define-environment-variable-container/>为容器设置环境变量</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-inject-data-application-define-interdependent-environment-variables href=/zh/docs/tasks/inject-data-application/define-interdependent-environment-variables/>定义相互依赖的环境变量</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-inject-data-application-environment-variable-expose-pod-information href=/zh/docs/tasks/inject-data-application/environment-variable-expose-pod-information/>通过环境变量将 Pod 信息呈现给容器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-inject-data-application-downward-api-volume-expose-pod-information href=/zh/docs/tasks/inject-data-application/downward-api-volume-expose-pod-information/>通过文件将 Pod 信息呈现给容器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-inject-data-application-distribute-credentials-secure href=/zh/docs/tasks/inject-data-application/distribute-credentials-secure/>使用 Secret 安全地分发凭证</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/run-application/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">运行应用</a></li><ul><li class=collapse id=zh-docs-tasks-run-application><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-run-single-instance-stateful-application href=/zh/docs/tasks/run-application/run-single-instance-stateful-application/>运行一个单实例有状态应用</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-run-replicated-stateful-application href=/zh/docs/tasks/run-application/run-replicated-stateful-application/>运行一个有状态的应用程序</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-delete-stateful-set href=/zh/docs/tasks/run-application/delete-stateful-set/>删除 StatefulSet</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-force-delete-stateful-set-pod href=/zh/docs/tasks/run-application/force-delete-stateful-set-pod/>强制删除 StatefulSet 类型的 Pods</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-horizontal-pod-autoscale href=/zh/docs/tasks/run-application/horizontal-pod-autoscale/>Pod 水平自动扩缩</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-horizontal-pod-autoscale-walkthrough href=/zh/docs/tasks/run-application/horizontal-pod-autoscale-walkthrough/>Horizontal Pod Autoscaler 演练</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-configure-pdb href=/zh/docs/tasks/run-application/configure-pdb/>为应用程序设置干扰预算（Disruption Budget）</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-access-api-from-pod href=/zh/docs/tasks/run-application/access-api-from-pod/>从 Pod 中访问 Kubernetes API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-run-stateless-application-deployment href=/zh/docs/tasks/run-application/run-stateless-application-deployment/>使用Deployment运行一个无状态应用</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-run-application-scale-stateful-set href=/zh/docs/tasks/run-application/scale-stateful-set/>扩缩 StatefulSet</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/job/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">运行 Jobs</a></li><ul><li class=collapse id=zh-docs-tasks-job><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-job-automated-tasks-with-cron-jobs href=/zh/docs/tasks/job/automated-tasks-with-cron-jobs/>使用 CronJob 运行自动化任务</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-job-parallel-processing-expansion href=/zh/docs/tasks/job/parallel-processing-expansion/>使用展开的方式进行并行处理</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-job-coarse-parallel-processing-work-queue href=/zh/docs/tasks/job/coarse-parallel-processing-work-queue/>使用工作队列进行粗粒度并行处理</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-job-fine-parallel-processing-work-queue href=/zh/docs/tasks/job/fine-parallel-processing-work-queue/>使用工作队列进行精细的并行处理</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/access-application-cluster/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">访问集群中的应用程序</a></li><ul><li class=collapse id=zh-docs-tasks-access-application-cluster><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-web-ui-dashboard href=/zh/docs/tasks/access-application-cluster/web-ui-dashboard/>Web 界面 (Dashboard)</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-access-cluster href=/zh/docs/tasks/access-application-cluster/access-cluster/>访问集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-port-forward-access-application-cluster href=/zh/docs/tasks/access-application-cluster/port-forward-access-application-cluster/>使用端口转发来访问集群中的应用</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-service-access-application-cluster href=/zh/docs/tasks/access-application-cluster/service-access-application-cluster/>使用服务来访问集群中的应用</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-connecting-frontend-backend href=/zh/docs/tasks/access-application-cluster/connecting-frontend-backend/>使用 Service 把前端连接到后端</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-create-external-load-balancer href=/zh/docs/tasks/access-application-cluster/create-external-load-balancer/>创建外部负载均衡器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-list-all-running-container-images href=/zh/docs/tasks/access-application-cluster/list-all-running-container-images/>列出集群中所有运行容器的镜像</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-ingress-minikube href=/zh/docs/tasks/access-application-cluster/ingress-minikube/>在 Minikube 环境中使用 NGINX Ingress 控制器配置 Ingress</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-configure-dns-cluster href=/zh/docs/tasks/access-application-cluster/configure-dns-cluster/>为集群配置 DNS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-communicate-containers-same-pod-shared-volume href=/zh/docs/tasks/access-application-cluster/communicate-containers-same-pod-shared-volume/>同 Pod 内的容器使用共享卷通信</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-access-application-cluster-configure-access-multiple-clusters href=/zh/docs/tasks/access-application-cluster/configure-access-multiple-clusters/>配置对多集群的访问</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/debug-application-cluster/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">监控、日志和排错</a></li><ul><li class=collapse id=zh-docs-tasks-debug-application-cluster><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-crictl href=/zh/docs/tasks/debug-application-cluster/crictl/>使用 crictl 对 Kubernetes 节点进行调试</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-logging-stackdriver href=/zh/docs/tasks/debug-application-cluster/logging-stackdriver/>使用 Stackdriver 生成日志</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-local-debugging href=/zh/docs/tasks/debug-application-cluster/local-debugging/>在本地开发和调试服务</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-audit href=/zh/docs/tasks/debug-application-cluster/audit/>审计</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-debug-application href=/zh/docs/tasks/debug-application-cluster/debug-application/>应用故障排查</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-debug-application-introspection href=/zh/docs/tasks/debug-application-cluster/debug-application-introspection/>应用自测与调试</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-troubleshooting href=/zh/docs/tasks/debug-application-cluster/troubleshooting/>故障诊断</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-determine-reason-pod-failure href=/zh/docs/tasks/debug-application-cluster/determine-reason-pod-failure/>确定 Pod 失败的原因</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-monitor-node-health href=/zh/docs/tasks/debug-application-cluster/monitor-node-health/>节点健康监测</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-get-shell-running-container href=/zh/docs/tasks/debug-application-cluster/get-shell-running-container/>获取正在运行容器的 Shell</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-debug-init-containers href=/zh/docs/tasks/debug-application-cluster/debug-init-containers/>调试 Init 容器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-debug-pod-replication-controller href=/zh/docs/tasks/debug-application-cluster/debug-pod-replication-controller/>调试 Pods 和 ReplicationControllers</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-debug-service href=/zh/docs/tasks/debug-application-cluster/debug-service/>调试 Service</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-debug-stateful-set href=/zh/docs/tasks/debug-application-cluster/debug-stateful-set/>调试StatefulSet</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-debug-running-pod href=/zh/docs/tasks/debug-application-cluster/debug-running-pod/>调试运行中的 Pod</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-resource-metrics-pipeline href=/zh/docs/tasks/debug-application-cluster/resource-metrics-pipeline/>资源指标管道</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-resource-usage-monitoring href=/zh/docs/tasks/debug-application-cluster/resource-usage-monitoring/>资源监控工具</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-debug-application-cluster-debug-cluster href=/zh/docs/tasks/debug-application-cluster/debug-cluster/>集群故障排查</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/extend-kubernetes/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">扩展 Kubernetes</a></li><ul><li class=collapse id=zh-docs-tasks-extend-kubernetes><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/extend-kubernetes/custom-resources/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">使用自定义资源</a></li><ul><li class=collapse id=zh-docs-tasks-extend-kubernetes-custom-resources><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-extend-kubernetes-custom-resources-custom-resource-definitions href=/zh/docs/tasks/extend-kubernetes/custom-resources/custom-resource-definitions/>使用 CustomResourceDefinition 扩展 Kubernetes API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-extend-kubernetes-custom-resources-custom-resource-definition-versioning href=/zh/docs/tasks/extend-kubernetes/custom-resources/custom-resource-definition-versioning/>CustomResourceDefinition 的版本</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-extend-kubernetes-configure-aggregation-layer href=/zh/docs/tasks/extend-kubernetes/configure-aggregation-layer/>配置聚合层</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-extend-kubernetes-setup-extension-api-server href=/zh/docs/tasks/extend-kubernetes/setup-extension-api-server/>安装一个扩展的 API server</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-extend-kubernetes-configure-multiple-schedulers href=/zh/docs/tasks/extend-kubernetes/configure-multiple-schedulers/>配置多个调度器</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-extend-kubernetes-http-proxy-access-api href=/zh/docs/tasks/extend-kubernetes/http-proxy-access-api/>使用 HTTP 代理访问 Kubernetes API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-extend-kubernetes-setup-konnectivity href=/zh/docs/tasks/extend-kubernetes/setup-konnectivity/>设置 Konnectivity 服务</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/tls/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">TLS</a></li><ul><li class=collapse id=zh-docs-tasks-tls><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-tls-certificate-rotation href=/zh/docs/tasks/tls/certificate-rotation/>为 kubelet 配置证书轮换</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-tls-manual-rotation-of-ca-certificates href=/zh/docs/tasks/tls/manual-rotation-of-ca-certificates/>手动轮换 CA 证书</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-tls-managing-tls-in-a-cluster href=/zh/docs/tasks/tls/managing-tls-in-a-cluster/>管理集群中的 TLS 认证</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/manage-daemon/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">管理集群守护进程</a></li><ul><li class=collapse id=zh-docs-tasks-manage-daemon><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-manage-daemon-update-daemon-set href=/zh/docs/tasks/manage-daemon/update-daemon-set/>对 DaemonSet 执行滚动更新</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-manage-daemon-rollback-daemon-set href=/zh/docs/tasks/manage-daemon/rollback-daemon-set/>对 DaemonSet 执行回滚</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/service-catalog/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">安装服务目录</a></li><ul><li class=collapse id=zh-docs-tasks-service-catalog><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-service-catalog-install-service-catalog-using-helm href=/zh/docs/tasks/service-catalog/install-service-catalog-using-helm/>使用 Helm 安装 Service Catalog</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-service-catalog-install-service-catalog-using-sc href=/zh/docs/tasks/service-catalog/install-service-catalog-using-sc/>使用 SC 安装服务目录</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tasks/network/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">网络</a></li><ul><li class=collapse id=zh-docs-tasks-network><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-network-validate-dual-stack href=/zh/docs/tasks/network/validate-dual-stack/>验证 IPv4/IPv6 双协议栈</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-tasks-kubelet-credential-provider-kubelet-credential-provider target=_blank href=/docs/tasks/kubelet-credential-provider/kubelet-credential-provider/>Configure a kubelet image credential provider <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-extend-kubectl-kubectl-plugins href=/zh/docs/tasks/extend-kubectl/kubectl-plugins/>用插件扩展 kubectl</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-manage-hugepages-scheduling-hugepages href=/zh/docs/tasks/manage-hugepages/scheduling-hugepages/>管理巨页（HugePages）</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tasks-manage-gpus-scheduling-gpus href=/zh/docs/tasks/manage-gpus/scheduling-gpus/>调度 GPUs</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">教程</a></li><ul><li class=collapse id=zh-docs-tutorials><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-hello-minikube href=/zh/docs/tutorials/hello-minikube/>你好，Minikube</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/kubernetes-basics/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">学习 Kubernetes 基础知识</a></li><ul><li class=collapse id=zh-docs-tutorials-kubernetes-basics><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/kubernetes-basics/create-cluster/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">创建集群</a></li><ul><li class=collapse id=zh-docs-tutorials-kubernetes-basics-create-cluster><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-create-cluster-cluster-intro href=/zh/docs/tutorials/kubernetes-basics/create-cluster/cluster-intro/>使用 Minikube 创建集群</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-create-cluster-cluster-interactive href=/zh/docs/tutorials/kubernetes-basics/create-cluster/cluster-interactive/>交互式教程 - 创建集群</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/kubernetes-basics/deploy-app/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">部署应用</a></li><ul><li class=collapse id=zh-docs-tutorials-kubernetes-basics-deploy-app><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-deploy-app-deploy-intro href=/zh/docs/tutorials/kubernetes-basics/deploy-app/deploy-intro/>使用 kubectl 创建 Deployment</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-deploy-app-deploy-interactive href=/zh/docs/tutorials/kubernetes-basics/deploy-app/deploy-interactive/>交互式教程 - 部署应用</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/kubernetes-basics/explore/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">了解你的应用</a></li><ul><li class=collapse id=zh-docs-tutorials-kubernetes-basics-explore><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-explore-explore-intro href=/zh/docs/tutorials/kubernetes-basics/explore/explore-intro/>查看 pod 和工作节点</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-explore-explore-interactive href=/zh/docs/tutorials/kubernetes-basics/explore/explore-interactive/>交互式教程-了解你的应用</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/kubernetes-basics/expose/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">公开地暴露你的应用</a></li><ul><li class=collapse id=zh-docs-tutorials-kubernetes-basics-expose><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-expose-expose-intro href=/zh/docs/tutorials/kubernetes-basics/expose/expose-intro/>使用 Service 暴露您的应用</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-expose-expose-interactive href=/zh/docs/tutorials/kubernetes-basics/expose/expose-interactive/>交互式教程 - 暴露你的应用</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/kubernetes-basics/scale/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">缩放你的应用</a></li><ul><li class=collapse id=zh-docs-tutorials-kubernetes-basics-scale><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-scale-scale-intro href=/zh/docs/tutorials/kubernetes-basics/scale/scale-intro/>运行应用程序的多个实例</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-scale-scale-interactive href=/zh/docs/tutorials/kubernetes-basics/scale/scale-interactive/>交互教程 - 缩放你的应用</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/kubernetes-basics/update/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">更新你的应用</a></li><ul><li class=collapse id=zh-docs-tutorials-kubernetes-basics-update><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-update-update-intro href=/zh/docs/tutorials/kubernetes-basics/update/update-intro/>执行滚动更新</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-kubernetes-basics-update-update-interactive href=/zh/docs/tutorials/kubernetes-basics/update/update-interactive/>交互式教程 - 更新你的应用</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/configuration/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">配置</a></li><ul><li class=collapse id=zh-docs-tutorials-configuration><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/configuration/configure-java-microservice/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">示例：配置 java 微服务</a></li><ul><li class=collapse id=zh-docs-tutorials-configuration-configure-java-microservice><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-configuration-configure-java-microservice-configure-java-microservice href=/zh/docs/tutorials/configuration/configure-java-microservice/configure-java-microservice/>使用 MicroProfile、ConfigMaps、Secrets 实现外部化应用配置</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-configuration-configure-java-microservice-configure-java-microservice-interactive href=/zh/docs/tutorials/configuration/configure-java-microservice/configure-java-microservice-interactive/>互动教程 - 配置 java 微服务</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-configuration-configure-redis-using-configmap href=/zh/docs/tutorials/configuration/configure-redis-using-configmap/>使用 ConfigMap 来配置 Redis</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/stateless-application/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">无状态应用程序</a></li><ul><li class=collapse id=zh-docs-tutorials-stateless-application><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-stateless-application-expose-external-ip-address href=/zh/docs/tutorials/stateless-application/expose-external-ip-address/>公开外部 IP 地址以访问集群中应用程序</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-stateless-application-guestbook href=/zh/docs/tutorials/stateless-application/guestbook/>示例：使用 MongoDB 部署 PHP 留言板应用程序</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/stateful-application/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">有状态的应用</a></li><ul><li class=collapse id=zh-docs-tutorials-stateful-application><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-stateful-application-mysql-wordpress-persistent-volume href=/zh/docs/tutorials/stateful-application/mysql-wordpress-persistent-volume/>示例：使用 Persistent Volumes 部署 WordPress 和 MySQL</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-stateful-application-zookeeper href=/zh/docs/tutorials/stateful-application/zookeeper/>运行 ZooKeeper，一个分布式协调系统</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-stateful-application-basic-stateful-set href=/zh/docs/tutorials/stateful-application/basic-stateful-set/>StatefulSet 基础</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-stateful-application-cassandra href=/zh/docs/tutorials/stateful-application/cassandra/>示例：使用 Stateful Sets 部署 Cassandra</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/clusters/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">集群</a></li><ul><li class=collapse id=zh-docs-tutorials-clusters><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-clusters-seccomp href=/zh/docs/tutorials/clusters/seccomp/>使用 Seccomp 限制容器的系统调用</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-clusters-apparmor href=/zh/docs/tutorials/clusters/apparmor/>AppArmor</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/tutorials/services/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Services</a></li><ul><li class=collapse id=zh-docs-tutorials-services><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-tutorials-services-source-ip href=/zh/docs/tutorials/services/source-ip/>使用 Source IP</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">参考</a></li><ul><li class="collapse show" id=zh-docs-reference><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-glossary href=/zh/docs/reference/glossary/>标准化词汇表</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/using-api/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">API 概述</a></li><ul><li class=collapse id=zh-docs-reference-using-api><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-using-api-api-concepts href=/zh/docs/reference/using-api/api-concepts/>Kubernetes API 概念</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-using-api-server-side-apply href=/zh/docs/reference/using-api/server-side-apply/>服务器端应用（Server-Side Apply）</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-using-api-client-libraries href=/zh/docs/reference/using-api/client-libraries/>客户端库</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-using-api-deprecation-policy href=/zh/docs/reference/using-api/deprecation-policy/>Kubernetes 弃用策略</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-using-api-deprecation-guide target=_blank href=/docs/reference/using-api/deprecation-guide/>Deprecated API Migration Guide <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-using-api-health-checks href=/zh/docs/reference/using-api/health-checks/>Kubernetes API 健康端点</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/issues-security/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Kubernetes 问题和安全</a></li><ul><li class=collapse id=zh-docs-reference-issues-security><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-issues-security-issues href=/zh/docs/reference/issues-security/issues/>Kubernetes 问题追踪</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-issues-security-security href=/zh/docs/reference/issues-security/security/>Kubernetes 安全和信息披露</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-labels-annotations-taints href=/zh/docs/reference/labels-annotations-taints/>常见的标签、注解和污点</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/access-authn-authz/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">访问 API</a></li><ul><li class="collapse show" id=zh-docs-reference-access-authn-authz><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-authentication href=/zh/docs/reference/access-authn-authz/authentication/>用户认证</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-bootstrap-tokens href=/zh/docs/reference/access-authn-authz/bootstrap-tokens/>使用启动引导令牌（Bootstrap Tokens）认证</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-certificate-signing-requests href=/zh/docs/reference/access-authn-authz/certificate-signing-requests/>证书签名请求</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-admission-controllers href=/zh/docs/reference/access-authn-authz/admission-controllers/>使用准入控制器</a>
<a class="td-sidebar-link td-sidebar-link__page active" id=m-zh-docs-reference-access-authn-authz-extensible-admission-controllers href=/zh/docs/reference/access-authn-authz/extensible-admission-controllers/>动态准入控制</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-service-accounts-admin href=/zh/docs/reference/access-authn-authz/service-accounts-admin/>管理 Service Accounts</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-authorization href=/zh/docs/reference/access-authn-authz/authorization/>鉴权概述</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-rbac href=/zh/docs/reference/access-authn-authz/rbac/>使用 RBAC 鉴权</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-node href=/zh/docs/reference/access-authn-authz/node/>使用 Node 鉴权</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-webhook href=/zh/docs/reference/access-authn-authz/webhook/>Webhook 模式</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-access-authn-authz-abac href=/zh/docs/reference/access-authn-authz/abac/>使用 ABAC 鉴权</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/kubernetes-api/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">API 参考</a></li><ul><li class=collapse id=zh-docs-reference-kubernetes-api><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/reference/kubernetes-api/workload-resources/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Workload Resources</a></li><ul><li class=collapse id=docs-reference-kubernetes-api-workload-resources><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-workload-resources-pod-v1 target=_blank href=/docs/reference/kubernetes-api/workload-resources/pod-v1/>Pod <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-workload-resources-container target=_blank href=/docs/reference/kubernetes-api/workload-resources/container/>Container <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-workload-resources-ephemeral-container target=_blank href=/docs/reference/kubernetes-api/workload-resources/ephemeral-container/>EphemeralContainer <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-workload-resources-pod-template-v1 target=_blank href=/docs/reference/kubernetes-api/workload-resources/pod-template-v1/>PodTemplate <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-workload-resources-replication-controller-v1 target=_blank href=/docs/reference/kubernetes-api/workload-resources/replication-controller-v1/>ReplicationController <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-workload-resources-replica-set-v1 target=_blank href=/docs/reference/kubernetes-api/workload-resources/replica-set-v1/>ReplicaSet <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-workload-resources-deployment-v1 target=_blank href=/docs/reference/kubernetes-api/workload-resources/deployment-v1/>Deployment <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-workload-resources-stateful-set-v1 target=_blank href=/docs/reference/kubernetes-api/workload-resources/stateful-set-v1/>StatefulSet <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-workload-resources-controller-revision-v1 target=_blank href=/docs/reference/kubernetes-api/workload-resources/controller-revision-v1/>ControllerRevision <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-workload-resources-daemon-set-v1 target=_blank href=/docs/reference/kubernetes-api/workload-resources/daemon-set-v1/>DaemonSet <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-workload-resources-job-v1 target=_blank href=/docs/reference/kubernetes-api/workload-resources/job-v1/>Job <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-workload-resources-cron-job-v1beta1 target=_blank href=/docs/reference/kubernetes-api/workload-resources/cron-job-v1beta1/>CronJob v1beta1 <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-workload-resources-cron-job-v2alpha1 target=_blank href=/docs/reference/kubernetes-api/workload-resources/cron-job-v2alpha1/>CronJob v2alpha1 <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-workload-resources-horizontal-pod-autoscaler-v1 target=_blank href=/docs/reference/kubernetes-api/workload-resources/horizontal-pod-autoscaler-v1/>HorizontalPodAutoscaler <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-workload-resources-horizontal-pod-autoscaler-v2beta2 target=_blank href=/docs/reference/kubernetes-api/workload-resources/horizontal-pod-autoscaler-v2beta2/>HorizontalPodAutoscaler v2beta2 <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-workload-resources-priority-class-v1 target=_blank href=/docs/reference/kubernetes-api/workload-resources/priority-class-v1/>PriorityClass <small>(EN)</small></a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/reference/kubernetes-api/service-resources/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Service Resources</a></li><ul><li class=collapse id=docs-reference-kubernetes-api-service-resources><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-service-resources-service-v1 target=_blank href=/docs/reference/kubernetes-api/service-resources/service-v1/>Service <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-service-resources-endpoints-v1 target=_blank href=/docs/reference/kubernetes-api/service-resources/endpoints-v1/>Endpoints <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-service-resources-endpoint-slice-v1beta1 target=_blank href=/docs/reference/kubernetes-api/service-resources/endpoint-slice-v1beta1/>EndpointSlice v1beta1 <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-service-resources-ingress-v1 target=_blank href=/docs/reference/kubernetes-api/service-resources/ingress-v1/>Ingress <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-service-resources-ingress-class-v1 target=_blank href=/docs/reference/kubernetes-api/service-resources/ingress-class-v1/>IngressClass <small>(EN)</small></a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/reference/kubernetes-api/config-and-storage-resources/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Config and Storage Resources</a></li><ul><li class=collapse id=docs-reference-kubernetes-api-config-and-storage-resources><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-config-and-storage-resources-config-map-v1 target=_blank href=/docs/reference/kubernetes-api/config-and-storage-resources/config-map-v1/>ConfigMap <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-config-and-storage-resources-secret-v1 target=_blank href=/docs/reference/kubernetes-api/config-and-storage-resources/secret-v1/>Secret <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-config-and-storage-resources-volume target=_blank href=/docs/reference/kubernetes-api/config-and-storage-resources/volume/>Volume <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-config-and-storage-resources-persistent-volume-claim-v1 target=_blank href=/docs/reference/kubernetes-api/config-and-storage-resources/persistent-volume-claim-v1/>PersistentVolumeClaim <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-config-and-storage-resources-persistent-volume-v1 target=_blank href=/docs/reference/kubernetes-api/config-and-storage-resources/persistent-volume-v1/>PersistentVolume <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-config-and-storage-resources-storage-class-v1 target=_blank href=/docs/reference/kubernetes-api/config-and-storage-resources/storage-class-v1/>StorageClass <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-config-and-storage-resources-volume-attachment-v1 target=_blank href=/docs/reference/kubernetes-api/config-and-storage-resources/volume-attachment-v1/>VolumeAttachment <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-config-and-storage-resources-csi-driver-v1 target=_blank href=/docs/reference/kubernetes-api/config-and-storage-resources/csi-driver-v1/>CSIDriver <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-config-and-storage-resources-csi-node-v1 target=_blank href=/docs/reference/kubernetes-api/config-and-storage-resources/csi-node-v1/>CSINode <small>(EN)</small></a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/reference/kubernetes-api/authentication-resources/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Authentication Resources</a></li><ul><li class=collapse id=docs-reference-kubernetes-api-authentication-resources><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-authentication-resources-service-account-v1 target=_blank href=/docs/reference/kubernetes-api/authentication-resources/service-account-v1/>ServiceAccount <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-authentication-resources-token-request-v1 target=_blank href=/docs/reference/kubernetes-api/authentication-resources/token-request-v1/>TokenRequest <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-authentication-resources-token-review-v1 target=_blank href=/docs/reference/kubernetes-api/authentication-resources/token-review-v1/>TokenReview <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-authentication-resources-certificate-signing-request-v1 target=_blank href=/docs/reference/kubernetes-api/authentication-resources/certificate-signing-request-v1/>CertificateSigningRequest <small>(EN)</small></a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/reference/kubernetes-api/authorization-resources/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Authorization Resources</a></li><ul><li class=collapse id=docs-reference-kubernetes-api-authorization-resources><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-authorization-resources-local-subject-access-review-v1 target=_blank href=/docs/reference/kubernetes-api/authorization-resources/local-subject-access-review-v1/>LocalSubjectAccessReview <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-authorization-resources-self-subject-access-review-v1 target=_blank href=/docs/reference/kubernetes-api/authorization-resources/self-subject-access-review-v1/>SelfSubjectAccessReview <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-authorization-resources-self-subject-rules-review-v1 target=_blank href=/docs/reference/kubernetes-api/authorization-resources/self-subject-rules-review-v1/>SelfSubjectRulesReview <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-authorization-resources-subject-access-review-v1 target=_blank href=/docs/reference/kubernetes-api/authorization-resources/subject-access-review-v1/>SubjectAccessReview <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-authorization-resources-cluster-role-v1 target=_blank href=/docs/reference/kubernetes-api/authorization-resources/cluster-role-v1/>ClusterRole <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-authorization-resources-cluster-role-binding-v1 target=_blank href=/docs/reference/kubernetes-api/authorization-resources/cluster-role-binding-v1/>ClusterRoleBinding <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-authorization-resources-role-v1 target=_blank href=/docs/reference/kubernetes-api/authorization-resources/role-v1/>Role <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-authorization-resources-role-binding-v1 target=_blank href=/docs/reference/kubernetes-api/authorization-resources/role-binding-v1/>RoleBinding <small>(EN)</small></a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/reference/kubernetes-api/policy-resources/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Policy Resources</a></li><ul><li class=collapse id=docs-reference-kubernetes-api-policy-resources><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-policy-resources-limit-range-v1 target=_blank href=/docs/reference/kubernetes-api/policy-resources/limit-range-v1/>LimitRange <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-policy-resources-resource-quota-v1 target=_blank href=/docs/reference/kubernetes-api/policy-resources/resource-quota-v1/>ResourceQuota <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-policy-resources-network-policy-v1 target=_blank href=/docs/reference/kubernetes-api/policy-resources/network-policy-v1/>NetworkPolicy <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-policy-resources-pod-disruption-budget-v1beta1 target=_blank href=/docs/reference/kubernetes-api/policy-resources/pod-disruption-budget-v1beta1/>PodDisruptionBudget v1beta1 <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-policy-resources-pod-security-policy-v1beta1 target=_blank href=/docs/reference/kubernetes-api/policy-resources/pod-security-policy-v1beta1/>PodSecurityPolicy v1beta1 <small>(EN)</small></a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/reference/kubernetes-api/extend-resources/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Extend Resources</a></li><ul><li class=collapse id=docs-reference-kubernetes-api-extend-resources><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-extend-resources-custom-resource-definition-v1 target=_blank href=/docs/reference/kubernetes-api/extend-resources/custom-resource-definition-v1/>CustomResourceDefinition <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-extend-resources-mutating-webhook-configuration-v1 target=_blank href=/docs/reference/kubernetes-api/extend-resources/mutating-webhook-configuration-v1/>MutatingWebhookConfiguration <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-extend-resources-validating-webhook-configuration-v1 target=_blank href=/docs/reference/kubernetes-api/extend-resources/validating-webhook-configuration-v1/>ValidatingWebhookConfiguration <small>(EN)</small></a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/reference/kubernetes-api/cluster-resources/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Cluster Resources</a></li><ul><li class=collapse id=docs-reference-kubernetes-api-cluster-resources><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-cluster-resources-node-v1 target=_blank href=/docs/reference/kubernetes-api/cluster-resources/node-v1/>Node <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-cluster-resources-namespace-v1 target=_blank href=/docs/reference/kubernetes-api/cluster-resources/namespace-v1/>Namespace <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-cluster-resources-event-v1 target=_blank href=/docs/reference/kubernetes-api/cluster-resources/event-v1/>Event <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-cluster-resources-api-service-v1 target=_blank href=/docs/reference/kubernetes-api/cluster-resources/api-service-v1/>APIService <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-cluster-resources-lease-v1 target=_blank href=/docs/reference/kubernetes-api/cluster-resources/lease-v1/>Lease <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-cluster-resources-runtime-class-v1 target=_blank href=/docs/reference/kubernetes-api/cluster-resources/runtime-class-v1/>RuntimeClass <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-cluster-resources-flow-schema-v1beta1 target=_blank href=/docs/reference/kubernetes-api/cluster-resources/flow-schema-v1beta1/>FlowSchema v1beta1 <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-cluster-resources-priority-level-configuration-v1beta1 target=_blank href=/docs/reference/kubernetes-api/cluster-resources/priority-level-configuration-v1beta1/>PriorityLevelConfiguration v1beta1 <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-cluster-resources-binding-v1 target=_blank href=/docs/reference/kubernetes-api/cluster-resources/binding-v1/>Binding <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-cluster-resources-component-status-v1 target=_blank href=/docs/reference/kubernetes-api/cluster-resources/component-status-v1/>ComponentStatus <small>(EN)</small></a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/reference/kubernetes-api/common-definitions/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Common Definitions</a></li><ul><li class=collapse id=docs-reference-kubernetes-api-common-definitions><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-common-definitions-delete-options target=_blank href=/docs/reference/kubernetes-api/common-definitions/delete-options/>DeleteOptions <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-common-definitions-downward-api-volume-file target=_blank href=/docs/reference/kubernetes-api/common-definitions/downward-api-volume-file/>DownwardAPIVolumeFile <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-common-definitions-exec-action target=_blank href=/docs/reference/kubernetes-api/common-definitions/exec-action/>ExecAction <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-common-definitions-http-get-action target=_blank href=/docs/reference/kubernetes-api/common-definitions/http-get-action/>HTTPGetAction <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-common-definitions-json-schema-props target=_blank href=/docs/reference/kubernetes-api/common-definitions/json-schema-props/>JSONSchemaProps <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-common-definitions-key-to-path target=_blank href=/docs/reference/kubernetes-api/common-definitions/key-to-path/>KeyToPath <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-common-definitions-label-selector target=_blank href=/docs/reference/kubernetes-api/common-definitions/label-selector/>LabelSelector <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-common-definitions-list-meta target=_blank href=/docs/reference/kubernetes-api/common-definitions/list-meta/>ListMeta <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-common-definitions-local-object-reference target=_blank href=/docs/reference/kubernetes-api/common-definitions/local-object-reference/>LocalObjectReference <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-common-definitions-node-affinity target=_blank href=/docs/reference/kubernetes-api/common-definitions/node-affinity/>NodeAffinity <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-common-definitions-node-selector-requirement target=_blank href=/docs/reference/kubernetes-api/common-definitions/node-selector-requirement/>NodeSelectorRequirement <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-common-definitions-object-field-selector target=_blank href=/docs/reference/kubernetes-api/common-definitions/object-field-selector/>ObjectFieldSelector <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-common-definitions-object-meta target=_blank href=/docs/reference/kubernetes-api/common-definitions/object-meta/>ObjectMeta <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-common-definitions-object-reference target=_blank href=/docs/reference/kubernetes-api/common-definitions/object-reference/>ObjectReference <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-common-definitions-patch target=_blank href=/docs/reference/kubernetes-api/common-definitions/patch/>Patch <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-common-definitions-pod-affinity target=_blank href=/docs/reference/kubernetes-api/common-definitions/pod-affinity/>PodAffinity <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-common-definitions-pod-anti-affinity target=_blank href=/docs/reference/kubernetes-api/common-definitions/pod-anti-affinity/>PodAntiAffinity <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-common-definitions-quantity target=_blank href=/docs/reference/kubernetes-api/common-definitions/quantity/>Quantity <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-common-definitions-resource-field-selector target=_blank href=/docs/reference/kubernetes-api/common-definitions/resource-field-selector/>ResourceFieldSelector <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-common-definitions-status target=_blank href=/docs/reference/kubernetes-api/common-definitions/status/>Status <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-common-definitions-tcp-socket-action target=_blank href=/docs/reference/kubernetes-api/common-definitions/tcp-socket-action/>TCPSocketAction <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-common-definitions-typed-local-object-reference target=_blank href=/docs/reference/kubernetes-api/common-definitions/typed-local-object-reference/>TypedLocalObjectReference <small>(EN)</small></a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-kubernetes-api-common-parameters-common-parameters target=_blank href=/docs/reference/kubernetes-api/common-parameters/common-parameters/>Common Parameters <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-kubernetes-api-api-index href=/zh/docs/reference/kubernetes-api/api-index/>v1.20</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/setup-tools/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">安装工具</a></li><ul><li class=collapse id=zh-docs-reference-setup-tools><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/setup-tools/kubeadm/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Kubeadm</a></li><ul><li class=collapse id=zh-docs-reference-setup-tools-kubeadm><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/reference/setup-tools/kubeadm/generated/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Kubeadm Generated</a></li><ul><li class=collapse id=docs-reference-setup-tools-kubeadm-generated><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-kubeconfig target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_kubeconfig/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-kubeconfig-user target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_kubeconfig_user/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-kubelet target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_kubelet/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-kubelet-config target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_kubelet_config/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-kubelet-config-enable-dynamic target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_kubelet_config_enable-dynamic/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-selfhosting target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_selfhosting/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-alpha-selfhosting-pivot target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_alpha_selfhosting_pivot/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-certs target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_certs/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-certs-certificate-key target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_certs_certificate-key/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-certs-check-expiration target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_certs_check-expiration/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-certs-generate-csr target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_certs_generate-csr/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-certs-renew target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_certs_renew/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-certs-renew-admin-conf target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_certs_renew_admin.conf/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-certs-renew-all target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_certs_renew_all/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-certs-renew-apiserver-etcd-client target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_certs_renew_apiserver-etcd-client/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-certs-renew-apiserver-kubelet-client target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_certs_renew_apiserver-kubelet-client/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-certs-renew-apiserver target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_certs_renew_apiserver/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-certs-renew-controller-manager-conf target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_certs_renew_controller-manager.conf/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-certs-renew-etcd-healthcheck-client target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_certs_renew_etcd-healthcheck-client/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-certs-renew-etcd-peer target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_certs_renew_etcd-peer/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-certs-renew-etcd-server target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_certs_renew_etcd-server/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-certs-renew-front-proxy-client target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_certs_renew_front-proxy-client/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-certs-renew-scheduler-conf target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_certs_renew_scheduler.conf/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-completion target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_completion/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-config target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_config/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-config-images target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_config_images/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-config-images-list target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_config_images_list/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-config-images-pull target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_config_images_pull/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-config-migrate target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_config_migrate/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-config-print target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_config_print/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-config-print-init-defaults target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_config_print_init-defaults/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-config-print-join-defaults target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_config_print_join-defaults/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-config-view target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_config_view/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-addon target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_addon/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-addon-all target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_addon_all/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-addon-coredns target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_addon_coredns/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-addon-kube-proxy target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_addon_kube-proxy/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-bootstrap-token target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_bootstrap-token/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-certs target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-certs-all target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_all/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-certs-apiserver-etcd-client target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_apiserver-etcd-client/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-certs-apiserver-kubelet-client target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_apiserver-kubelet-client/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-certs-apiserver target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_apiserver/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-certs-ca target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_ca/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-certs-etcd-ca target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_etcd-ca/><small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-setup-tools-kubeadm-generated-kubeadm-init-phase-certs-etcd-healthcheck-client target=_blank href=/docs/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_etcd-healthcheck-client/><small>(EN)</small></a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-init href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-init/>kubeadm init</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-join href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-join/>kubeadm join</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-upgrade href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-upgrade/>kubeadm upgrade</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-config href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-config/>kubeadm config</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-reset href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-reset/>kubeadm reset</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-token href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-token/>kubeadm token</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-version href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-version/>kubeadm version</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-alpha href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-alpha/>kubeadm alpha</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-certs href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-certs/>kubeadm certs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-init-phase href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-init-phase/>kubeadm init phase</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-join-phase href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-join-phase/>kubeadm join phase</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-reset-phase href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-reset-phase/>kubeadm reset phase</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-kubeadm-upgrade-phase href=/zh/docs/reference/setup-tools/kubeadm/kubeadm-upgrade-phase/>kubeadm upgrade phase</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-setup-tools-kubeadm-implementation-details href=/zh/docs/reference/setup-tools/kubeadm/implementation-details/>实现细节</a></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/kubectl/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">kubectl 命令行界面</a></li><ul><li class=collapse id=zh-docs-reference-kubectl><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-kubectl-overview href=/zh/docs/reference/kubectl/overview/>kubectl 概述</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-kubectl-jsonpath href=/zh/docs/reference/kubectl/jsonpath/>JSONPath 支持</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-kubectl-kubectl href=/zh/docs/reference/kubectl/kubectl/>kubectl</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-kubectl-kubectl-cmds href=/zh/docs/reference/kubectl/kubectl-cmds/>kubectl 命令</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-kubectl-cheatsheet href=/zh/docs/reference/kubectl/cheatsheet/>kubectl 备忘单</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-kubectl-conventions href=/zh/docs/reference/kubectl/conventions/>kubectl 的用法约定</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-kubectl-docker-cli-to-kubectl href=/zh/docs/reference/kubectl/docker-cli-to-kubectl/>适用于 Docker 用户的 kubectl</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/command-line-tools-reference/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">命令行工具参考</a></li><ul><li class=collapse id=zh-docs-reference-command-line-tools-reference><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-command-line-tools-reference-feature-gates href=/zh/docs/reference/command-line-tools-reference/feature-gates/>特性门控</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-command-line-tools-reference-kubelet href=/zh/docs/reference/command-line-tools-reference/kubelet/>kubelet</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-command-line-tools-reference-kube-apiserver href=/zh/docs/reference/command-line-tools-reference/kube-apiserver/>kube-apiserver</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-command-line-tools-reference-kube-controller-manager href=/zh/docs/reference/command-line-tools-reference/kube-controller-manager/>kube-controller-manager</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-command-line-tools-reference-kube-proxy href=/zh/docs/reference/command-line-tools-reference/kube-proxy/>kube-proxy</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-command-line-tools-reference-kube-scheduler href=/zh/docs/reference/command-line-tools-reference/kube-scheduler/>kube-scheduler</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-command-line-tools-reference-kubelet-authentication-authorization href=/zh/docs/reference/command-line-tools-reference/kubelet-authentication-authorization/>Kubelet 认证/鉴权</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-command-line-tools-reference-kubelet-config-v1beta1 target=_blank href=/docs/reference/command-line-tools-reference/kubelet-config.v1beta1/>kubelet.config.k8s.io/v1beta1 <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-command-line-tools-reference-kubelet-tls-bootstrapping href=/zh/docs/reference/command-line-tools-reference/kubelet-tls-bootstrapping/>TLS 启动引导</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/reference/config-api/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Configuration APIs</a></li><ul><li class=collapse id=docs-reference-config-api><a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-config-api-client-authentication-v1beta1 target=_blank href=/docs/reference/config-api/client-authentication.v1beta1/>Client Authentication (v1beta1) <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-config-api-apiserver-audit-v1 target=_blank href=/docs/reference/config-api/apiserver-audit.v1/>kube-apiserver Audit Configuration (v1) <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-config-api-kube-proxy-config-v1alpha1 target=_blank href=/docs/reference/config-api/kube-proxy-config.v1alpha1/>kube-proxy Configuration (v1alpha1) <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-config-api-kube-scheduler-config-v1beta1 target=_blank href=/docs/reference/config-api/kube-scheduler-config.v1beta1/>kube-scheduler Configuration (v1beta1) <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-config-api-kube-scheduler-policy-config-v1 target=_blank href=/docs/reference/config-api/kube-scheduler-policy-config.v1/>kube-scheduler Policy Configuration (v1) <small>(EN)</small></a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docs-reference-config-api-kubelet-config-v1beta1 target=_blank href=/docs/reference/config-api/kubelet-config.v1beta1/>Kubelet Configuration (v1beta1) <small>(EN)</small></a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/reference/scheduling/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">调度</a></li><ul><li class=collapse id=zh-docs-reference-scheduling><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-scheduling-policies href=/zh/docs/reference/scheduling/policies/>调度策略</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-scheduling-config href=/zh/docs/reference/scheduling/config/>调度器配置</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/reference/tools/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Other Tools</a></li><ul><li class=collapse id=docs-reference-tools></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-reference-tools href=/zh/docs/reference/tools/>工具</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/contribute/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">贡献</a></li><ul><li class=collapse id=zh-docs-contribute><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-suggest-improvements href=/zh/docs/contribute/suggest-improvements/>提出内容改进建议</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/contribute/new-content/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">贡献新内容</a></li><ul><li class=collapse id=zh-docs-contribute-new-content><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-new-content-overview href=/zh/docs/contribute/new-content/overview/>概述</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-new-content-open-a-pr href=/zh/docs/contribute/new-content/open-a-pr/>发起拉取请求（PR）</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-new-content-new-features href=/zh/docs/contribute/new-content/new-features/>为发行版本撰写文档</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-new-content-blogs-case-studies href=/zh/docs/contribute/new-content/blogs-case-studies/>博客和案例分析</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/contribute/review/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">评阅变更</a></li><ul><li class=collapse id=zh-docs-contribute-review><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-review-reviewing-prs href=/zh/docs/contribute/review/reviewing-prs/>评阅 PRs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-review-for-approvers href=/zh/docs/contribute/review/for-approvers/>评阅人和批准人</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-localization href=/zh/docs/contribute/localization/>本地化 Kubernetes 文档</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/contribute/participate/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">参与 SIG Docs</a></li><ul><li class=collapse id=zh-docs-contribute-participate><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-participate-roles-and-responsibilities href=/zh/docs/contribute/participate/roles-and-responsibilities/>角色与责任</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-participate-pr-wranglers href=/zh/docs/contribute/participate/pr-wranglers/>PR 管理者</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/contribute/generate-ref-docs/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">参考文档概述</a></li><ul><li class=collapse id=zh-docs-contribute-generate-ref-docs><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-generate-ref-docs-contribute-upstream href=/zh/docs/contribute/generate-ref-docs/contribute-upstream/>为上游 Kubernetes 代码库做出贡献</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-generate-ref-docs-quickstart href=/zh/docs/contribute/generate-ref-docs/quickstart/>快速入门</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-generate-ref-docs-kubernetes-api href=/zh/docs/contribute/generate-ref-docs/kubernetes-api/>为 Kubernetes API 生成参考文档</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-generate-ref-docs-kubectl href=/zh/docs/contribute/generate-ref-docs/kubectl/>为 kubectl 命令集生成参考文档</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-generate-ref-docs-kubernetes-components href=/zh/docs/contribute/generate-ref-docs/kubernetes-components/>为 Kubernetes 组件和工具生成参考文档</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-generate-ref-docs-prerequisites-ref-docs href=/zh/docs/contribute/generate-ref-docs/prerequisites-ref-docs/></a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/docs/contribute/style/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">文档样式概述</a></li><ul><li class=collapse id=zh-docs-contribute-style><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-style-content-guide href=/zh/docs/contribute/style/content-guide/>内容指南</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-style-style-guide href=/zh/docs/contribute/style/style-guide/>样式指南</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-style-write-new-topic href=/zh/docs/contribute/style/write-new-topic/>撰写新主题</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-style-page-content-types href=/zh/docs/contribute/style/page-content-types/>页面内容类型</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-style-content-organization href=/zh/docs/contribute/style/content-organization/>内容组织</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-style-hugo-shortcodes href=/zh/docs/contribute/style/hugo-shortcodes/>定制 Hugo 短代码</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-advanced href=/zh/docs/contribute/advanced/>高级贡献</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-contribute-localization-zh href=/zh/docs/contribute/localization_zh/>中文本地化样式指南</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-zh-docs-test href=/zh/docs/test/>测试页面（中文版）</a></li></ul></ul></nav></div></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://kubernetes.io/zh/docs/>Kubernetes 文档</a></li><li class=breadcrumb-item><a href=https://kubernetes.io/zh/docs/reference/>参考</a></li><li class=breadcrumb-item><a href=https://kubernetes.io/zh/docs/reference/access-authn-authz/>访问 API</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://kubernetes.io/zh/docs/reference/access-authn-authz/extensible-admission-controllers/>动态准入控制</a></li></ol></nav><section id=deprecation-warning><div class="content deprecation-warning"><h3>您正在查看 Kubernetes 版本的文档： v1.20</h3><p>Kubernetes v1.20 版本的文档已不再维护。您现在看到的版本来自于一份静态的快照。如需查阅最新文档，请点击
<a href=https://kubernetes.io/docs/home/>最新版本。</a></p></div></section><div class=td-content><h1>动态准入控制</h1><p>除了<a href=/zh/docs/reference/access-authn-authz/admission-controllers/>内置的 admission 插件</a>，
准入插件可以作为扩展独立开发，并以运行时所配置的 Webhook 的形式运行。
此页面描述了如何构建、配置、使用和监视准入 Webhook。</p><h2 id=什么是准入-webhook>什么是准入 Webhook？</h2><p>准入 Webhook 是一种用于接收准入请求并对其进行处理的 HTTP 回调机制。
可以定义两种类型的准入 webhook，即
<a href=/zh/docs/reference/access-authn-authz/admission-controllers/#validatingadmissionwebhook>验证性质的准入 Webhook</a> 和
<a href=/zh/docs/reference/access-authn-authz/admission-controllers/#mutatingadmissionwebhook>修改性质的准入 Webhook</a>。
修改性质的准入 Webhook 会先被调用。它们可以更改发送到 API
服务器的对象以执行自定义的设置默认值操作。</p><p>在完成了所有对象修改并且 API 服务器也验证了所传入的对象之后，
验证性质的 Webhook 会被调用，并通过拒绝请求的方式来强制实施自定义的策略。</p><blockquote class="note callout"><div><strong>说明：</strong> 如果准入 Webhook 需要保证它们所看到的是对象的最终状态以实施某种策略。
则应使用验证性质的准入 Webhook，因为对象被修改性质 Webhook 看到之后仍然可能被修改。</div></blockquote><h3 id=尝试准入-webhook>尝试准入 Webhook</h3><p>准入 Webhook 本质上是集群控制平面的一部分。你应该非常谨慎地编写和部署它们。
如果你打算编写或者部署生产级准入 webhook，请阅读<a href=/zh/docs/reference/access-authn-authz/extensible-admission-controllers/#write-an-admission-webhook-server>用户指南</a>以获取相关说明。
在下文中，我们将介绍如何快速试验准入 Webhook。</p><h3 id=prerequisites>先决条件</h3><ul><li><p>确保 Kubernetes 集群版本至少为 v1.16（以便使用 <code>admissionregistration.k8s.io/v1</code> API） 或者 v1.9 （以便使用 <code>admissionregistration.k8s.io/v1beta1</code> API）。</p></li><li><p>确保启用 MutatingAdmissionWebhook 和 ValidatingAdmissionWebhook 控制器。
<a href=/zh/docs/reference/access-authn-authz/admission-controllers/#is-there-a-recommended-set-of-admission-controllers-to-use>这里</a>
是一组推荐的 admission 控制器，通常可以启用。</p></li><li><p>确保启用了 <code>admissionregistration.k8s.io/v1beta1</code> API。</p></li></ul><h3 id=编写一个准入-webhook-服务器>编写一个准入 Webhook 服务器</h3><p>请参阅 Kubernetes e2e 测试中的 <a href=https://github.com/kubernetes/kubernetes/blob/v1.13.0/test/images/webhook/main.go>admission webhook 服务器</a> 的实现。webhook 处理由 apiserver 发送的 <code>AdmissionReview</code> 请求，并且将其决定作为 <code>AdmissionReview</code> 对象以相同版本发送回去。</p><p>有关发送到 webhook 的数据的详细信息，请参阅 <a href=#request>webhook 请求</a>。</p><p>要获取来自 webhook 的预期数据，请参阅 <a href=#response>webhook 响应</a>。</p><p>示例准入 Webhook 服务器置 <code>ClientAuth</code> 字段为<a href=https://github.com/kubernetes/kubernetes/blob/v1.13.0/test/images/webhook/config.go#L47-L48>空</a>，默认为 <code>NoClientCert</code> 。这意味着 webhook 服务器不会验证客户端的身份，认为其是 apiservers。
如果你需要双向 TLS 或其他方式来验证客户端，请参阅如何<a href=#authenticate-apiservers>对 apiservers 进行身份认证</a>。</p><h3 id=部署准入-webhook-服务>部署准入 Webhook 服务</h3><p>e2e 测试中的 webhook 服务器通过 <a href=/docs/reference/generated/kubernetes-api/v1.20/#deployment-v1-apps>deployment API</a> 部署在 Kubernetes 集群中。该测试还将创建一个 <a href=/docs/reference/generated/kubernetes-api/v1.20/#service-v1-core>service</a> 作为 webhook 服务器的前端。参见<a href=https://github.com/kubernetes/kubernetes/blob/v1.15.0/test/e2e/apimachinery/webhook.go#L301>相关代码</a>。</p><p>你也可以在集群外部署 webhook。这样做需要相应地更新你的 webhook 配置。</p><h3 id=即时配置准入-webhook>即时配置准入 Webhook</h3><p>你可以通过 <a href=/docs/reference/generated/kubernetes-api/v1.20/#validatingwebhookconfiguration-v1-admissionregistration-k8s-io>ValidatingWebhookConfiguration</a> 或者 <a href=/docs/reference/generated/kubernetes-api/v1.20/#mutatingwebhookconfiguration-v1-admissionregistration-k8s-io>MutatingWebhookConfiguration</a> 动态配置哪些资源要被哪些准入 Webhook 处理。</p><p>以下是一个 <code>ValidatingWebhookConfiguration</code> 示例，mutating webhook 配置与此类似。有关每个配置字段的详细信息，请参阅 <a href=#webhook-configuration>webhook 配置</a> 部分。</p><ul class="nav nav-tabs" id=validatingwebhookconfiguration-example-1 role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#validatingwebhookconfiguration-example-1-0 role=tab aria-controls=validatingwebhookconfiguration-example-1-0 aria-selected=true>admissionregistration.k8s.io/v1</a></li><li class=nav-item><a data-toggle=tab class=nav-link href=#validatingwebhookconfiguration-example-1-1 role=tab aria-controls=validatingwebhookconfiguration-example-1-1>admissionregistration.k8s.io/v1beta1</a></li></ul><div class=tab-content id=validatingwebhookconfiguration-example-1><div id=validatingwebhookconfiguration-example-1-0 class="tab-pane show active" role=tabpanel aria-labelledby=validatingwebhookconfiguration-example-1-0><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>ValidatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>metadata</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;pod-policy.example.com&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;pod-policy.example.com&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>rules</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>apiGroups</span>:<span style=color:#bbb>   </span>[<span style=color:#b44>&#34;&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiVersions</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;v1&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>operations</span>:<span style=color:#bbb>  </span>[<span style=color:#b44>&#34;CREATE&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>resources</span>:<span style=color:#bbb>   </span>[<span style=color:#b44>&#34;pods&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>scope</span>:<span style=color:#bbb>       </span><span style=color:#b44>&#34;Namespaced&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>clientConfig</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>service</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>namespace</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;example-namespace&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;example-service&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>caBundle</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;Ci0tLS0tQk...&lt;base64-encoded PEM bundle containing the CA that signed the webhook&#39;s serving certificate&gt;...tLS0K&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>admissionReviewVersions</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;v1&#34;</span>,<span style=color:#bbb> </span><span style=color:#b44>&#34;v1beta1&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>sideEffects</span>:<span style=color:#bbb> </span>None<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>timeoutSeconds</span>:<span style=color:#bbb> </span><span style=color:#666>5</span><span style=color:#bbb>
</span></code></pre></div></div><div id=validatingwebhookconfiguration-example-1-1 class=tab-pane role=tabpanel aria-labelledby=validatingwebhookconfiguration-example-1-1><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#080;font-style:italic># 1.16 中被淘汰，推荐使用 admissionregistration.k8s.io/v1</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1beta1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>ValidatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>metadata</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;pod-policy.example.com&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;pod-policy.example.com&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>rules</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>apiGroups</span>:<span style=color:#bbb>   </span>[<span style=color:#b44>&#34;&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiVersions</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;v1&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>operations</span>:<span style=color:#bbb>  </span>[<span style=color:#b44>&#34;CREATE&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>resources</span>:<span style=color:#bbb>   </span>[<span style=color:#b44>&#34;pods&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>scope</span>:<span style=color:#bbb>       </span><span style=color:#b44>&#34;Namespaced&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>clientConfig</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>service</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>namespace</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;example-namespace&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;example-service&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>caBundle</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;Ci0tLS0tQk...&lt;base64-encoded PEM bundle containing the CA that signed the webhook&#39;s serving certificate&gt;...tLS0K&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>admissionReviewVersions</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;v1beta1&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>timeoutSeconds</span>:<span style=color:#bbb> </span><span style=color:#666>5</span><span style=color:#bbb>
</span></code></pre></div></div></div><p>scope 字段指定是仅集群范围的资源（Cluster）还是名字空间范围的资源资源（Namespaced）将与此规则匹配。<code>*</code> 表示没有范围限制。</p><blockquote class="note callout"><div><strong>说明：</strong> 当使用 <code>clientConfig.service</code> 时，服务器证书必须对 <code>&lt;svc_name>.&lt;svc_namespace>.svc</code> 有效。</div></blockquote><blockquote class="note callout"><div><strong>说明：</strong> 对于使用 <code>admissionregistration.k8s.io/v1</code> 创建的 webhook 而言，其 webhook 调用的默认超时是 10 秒；
对于使用 <code>admissionregistration.k8s.io/v1beta1</code> 创建的 webhook 而言，其默认超时是 30 秒。
从 kubernetes 1.14 开始，可以设置超时。建议对 webhooks 设置较短的超时时间。
如果 webhook 调用超时，则根据 webhook 的失败策略处理请求。</div></blockquote><p>当 apiserver 收到与 <code>rules</code> 相匹配的请求时，apiserver 按照 <code>clientConfig</code> 中指定的方式向 webhook 发送一个 <code>admissionReview</code> 请求。</p><p>创建 webhook 配置后，系统将花费几秒钟使新配置生效。</p><h3 id=authenticate-apiservers>对 apiservers 进行身份认证</h3><p>如果你的 webhook 需要身份验证，则可以将 apiserver 配置为使用基本身份验证、持有者令牌或证书来向 webhook 提供身份证明。完成此配置需要三个步骤。</p><ul><li><p>启动 apiserver 时，通过 <code>--admission-control-config-file</code> 参数指定准入控制配置文件的位置。</p></li><li><p>在准入控制配置文件中，指定 MutatingAdmissionWebhook 控制器和 ValidatingAdmissionWebhook 控制器应该读取凭据的位置。
凭证存储在 kubeConfig 文件中（是​​的，与 kubectl 使用的模式相同），因此字段名称为 <code>kubeConfigFile</code>。
以下是一个准入控制配置文件示例：</p></li></ul><ul class="nav nav-tabs" id=admissionconfiguration-example1 role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#admissionconfiguration-example1-0 role=tab aria-controls=admissionconfiguration-example1-0 aria-selected=true>apiserver.config.k8s.io/v1</a></li><li class=nav-item><a data-toggle=tab class=nav-link href=#admissionconfiguration-example1-1 role=tab aria-controls=admissionconfiguration-example1-1>apiserver.k8s.io/v1alpha1</a></li></ul><div class=tab-content id=admissionconfiguration-example1><div id=admissionconfiguration-example1-0 class="tab-pane show active" role=tabpanel aria-labelledby=admissionconfiguration-example1-0><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>apiserver.config.k8s.io/v1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>AdmissionConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>plugins</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>ValidatingAdmissionWebhook<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>configuration</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>apiserver.config.k8s.io/v1<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>WebhookAdmissionConfiguration<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>kubeConfigFile</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;&lt;path-to-kubeconfig-file&gt;&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>MutatingAdmissionWebhook<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>configuration</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>apiserver.config.k8s.io/v1<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>WebhookAdmissionConfiguration<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>kubeConfigFile</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;&lt;path-to-kubeconfig-file&gt;&#34;</span><span style=color:#bbb>
</span></code></pre></div></div><div id=admissionconfiguration-example1-1 class=tab-pane role=tabpanel aria-labelledby=admissionconfiguration-example1-1><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#080;font-style:italic># 1.17 中被淘汰，推荐使用 apiserver.config.k8s.io/v1</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>apiserver.k8s.io/v1alpha1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>AdmissionConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>plugins</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>ValidatingAdmissionWebhook<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>configuration</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 1.17 中被淘汰，推荐使用 apiserver.config.k8s.io/v1，kind = WebhookAdmissionConfiguration</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>apiserver.config.k8s.io/v1alpha1<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>WebhookAdmission<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>kubeConfigFile</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;&lt;path-to-kubeconfig-file&gt;&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>MutatingAdmissionWebhook<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>configuration</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 1.17 中被淘汰，推荐使用 apiserver.config.k8s.io/v1，kind = WebhookAdmissionConfiguration</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>apiserver.config.k8s.io/v1alpha1<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>WebhookAdmission<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>kubeConfigFile</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;&lt;path-to-kubeconfig-file&gt;&#34;</span><span style=color:#bbb>
</span></code></pre></div></div></div><p>有关 <code>AdmissionConfiguration</code> 的更多信息，请参见 <a href=https://github.com/kubernetes/kubernetes/blob/v1.17.0/staging/src/k8s.io/apiserver/pkg/apis/apiserver/v1/types.go#L27>AdmissionConfiguration schema</a>。
有关每个配置字段的详细信息，请参见 <a href=#webhook-%E9%85%8D%E7%BD%AE>webhook 配置</a>部分。</p><ul><li><p>在 kubeConfig 文件中，提供证书凭据：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>v1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>Config<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>users</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic># 名称应设置为服务的 DNS 名称或配置了 Webhook 的 URL 的主机名（包括端口）。</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic># 如果将非 443 端口用于服务，则在配置 1.16+ API 服务器时，该端口必须包含在名称中。</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic>#</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic># 对于配置在默认端口（443）上与服务对话的 Webhook，请指定服务的 DNS 名称：</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic># - name: webhook1.ns1.svc</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic>#   user: ...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic>#</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic># 对于配置在非默认端口（例如 8443）上与服务对话的 Webhook，请在 1.16+ 中指定服务的 DNS 名称和端口：</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic># - name: webhook1.ns1.svc:8443</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic>#   user: ...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic># 并可以选择仅使用服务的 DNS 名称来创建第二节，以与 1.15 API 服务器版本兼容：</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic># - name: webhook1.ns1.svc</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic>#   user: ...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic>#</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic># 对于配置为使用 URL 的 webhook，请匹配在 webhook 的 URL 中指定的主机（和端口）。</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic># 带有 `url: https://www.example.com` 的 webhook：</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic># - name: www.example.com</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic>#   user: ...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic>#</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic># 带有 `url: https://www.example.com:443` 的 webhook：</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic># - name: www.example.com:443</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic>#   user: ...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic>#</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic># 带有 `url: https://www.example.com:8443` 的 webhook：</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic># - name: www.example.com:8443</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic>#   user: ...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic>#</span><span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span><span style=color:#b44>&#39;webhook1.ns1.svc&#39;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>user</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>client-certificate-data</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;&lt;pem encoded certificate&gt;&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>client-key-data</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;&lt;pem encoded key&gt;&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic># `name` 支持使用 * 通配符匹配前缀段。</span><span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span><span style=color:#b44>&#39;*.webhook-company.org&#39;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>user</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>password</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;&lt;password&gt;&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>username</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;&lt;name&gt;&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-style:italic># &#39;*&#39; 是默认匹配项。</span><span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span><span style=color:#b44>&#39;*&#39;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>user</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>token</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;&lt;token&gt;&#34;</span><span style=color:#bbb>
</span></code></pre></div></li></ul><p>当然，你需要设置 webhook 服务器来处理这些身份验证。</p><h3 id=request>请求</h3><p>向 Webhook 发送 POST 请求时，请设置 <code>Content-Type: application/json</code> 并对 <code>admission.k8s.io</code> API 组中的 <code>AdmissionReview</code> 对象进行序列化，将所得到的 JSON 作为请求的主体。</p><p>Webhook 可以在配置中的 <code>admissionReviewVersions</code> 字段指定可接受的 <code>AdmissionReview</code> 对象版本：</p><ul class="nav nav-tabs" id=validatingwebhookconfiguration-admissionreviewversions role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#validatingwebhookconfiguration-admissionreviewversions-0 role=tab aria-controls=validatingwebhookconfiguration-admissionreviewversions-0 aria-selected=true>admissionregistration.k8s.io/v1</a></li><li class=nav-item><a data-toggle=tab class=nav-link href=#validatingwebhookconfiguration-admissionreviewversions-1 role=tab aria-controls=validatingwebhookconfiguration-admissionreviewversions-1>admissionregistration.k8s.io/v1beta1</a></li></ul><div class=tab-content id=validatingwebhookconfiguration-admissionreviewversions><div id=validatingwebhookconfiguration-admissionreviewversions-0 class="tab-pane show active" role=tabpanel aria-labelledby=validatingwebhookconfiguration-admissionreviewversions-0><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>ValidatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>admissionReviewVersions</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;v1&#34;</span>,<span style=color:#bbb> </span><span style=color:#b44>&#34;v1beta1&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div><p>创建 <code>admissionregistration.k8s.io/v1</code> webhook 配置时，<code>admissionReviewVersions</code> 是必填字段。
Webhook 必须支持至少一个当前和以前的 apiserver 都可以解析的 <code>AdmissionReview</code> 版本。</p></div><div id=validatingwebhookconfiguration-admissionreviewversions-1 class=tab-pane role=tabpanel aria-labelledby=validatingwebhookconfiguration-admissionreviewversions-1><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#080;font-style:italic># v1.16 中被淘汰，推荐使用 admissionregistration.k8s.io/v1</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1beta1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>ValidatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>admissionReviewVersions</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;v1beta1&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div><p>如果未指定 <code>admissionReviewVersions</code>，则创建 <code>admissionregistration.k8s.io/v1beta1</code> Webhook 配置时的默认值为 <code>v1beta1</code>。</p></div></div><p>API 服务器将发送的是 <code>admissionReviewVersions</code> 列表中所支持的第一个 <code>AdmissionReview</code> 版本。如果 API 服务器不支持列表中的任何版本，则不允许创建配置。</p><p>如果 API 服务器遇到以前创建的 Webhook 配置，并且不支持该 API 服务器知道如何发送的任何 <code>AdmissionReview</code> 版本，则调用 Webhook 的尝试将失败，并依据<a href=#failure-policy>失败策略</a>进行处理。</p><p>此示例显示了 <code>AdmissionReview</code> 对象中包含的数据，该数据用于请求更新 <code>apps/v1</code> <code>Deployment</code> 的 <code>scale</code> 子资源：</p><ul class="nav nav-tabs" id=admissionreview-request role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#admissionreview-request-0 role=tab aria-controls=admissionreview-request-0 aria-selected=true>admission.k8s.io/v1</a></li><li class=nav-item><a data-toggle=tab class=nav-link href=#admissionreview-request-1 role=tab aria-controls=admissionreview-request-1>admission.k8s.io/v1beta1</a></li></ul><div class=tab-content id=admissionreview-request><div id=admissionreview-request-0 class="tab-pane show active" role=tabpanel aria-labelledby=admissionreview-request-0><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>{<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>&#34;apiVersion&#34;: </span><span style=color:#b44>&#34;admission.k8s.io/v1&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>&#34;kind&#34;: </span><span style=color:#b44>&#34;AdmissionReview&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>&#34;request&#34;: </span>{<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 唯一标识此准入回调的随机 uid</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;uid&#34;: </span><span style=color:#b44>&#34;705ab4f5-6393-11e8-b7cc-42010a800002&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 传入完全正确的 group/version/kind 对象</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;kind&#34;: </span>{<span style=color:#b44>&#34;group&#34;</span>:<span style=color:#b44>&#34;autoscaling&#34;</span>,<span style=color:#b44>&#34;version&#34;</span>:<span style=color:#b44>&#34;v1&#34;</span>,<span style=color:#b44>&#34;kind&#34;</span>:<span style=color:#b44>&#34;Scale&#34;</span>},<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 修改 resource 的完全正确的的 group/version/kind</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;resource&#34;: </span>{<span style=color:#b44>&#34;group&#34;</span>:<span style=color:#b44>&#34;apps&#34;</span>,<span style=color:#b44>&#34;version&#34;</span>:<span style=color:#b44>&#34;v1&#34;</span>,<span style=color:#b44>&#34;resource&#34;</span>:<span style=color:#b44>&#34;deployments&#34;</span>},<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># subResource（如果请求是针对 subResource 的）</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;subResource&#34;: </span><span style=color:#b44>&#34;scale&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 在对 API 服务器的原始请求中，传入对象的标准 group/version/kind</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 仅当 webhook 指定 `matchPolicy: Equivalent` 且将对 API 服务器的原始请求转换为 webhook 注册的版本时，这才与 `kind` 不同。</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;requestKind&#34;: </span>{<span style=color:#b44>&#34;group&#34;</span>:<span style=color:#b44>&#34;autoscaling&#34;</span>,<span style=color:#b44>&#34;version&#34;</span>:<span style=color:#b44>&#34;v1&#34;</span>,<span style=color:#b44>&#34;kind&#34;</span>:<span style=color:#b44>&#34;Scale&#34;</span>},<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 在对 API 服务器的原始请求中正在修改的资源的标准 group/version/kind</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 仅当 webhook 指定了 `matchPolicy：Equivalent` 并且将对 API 服务器的原始请求转换为 webhook 注册的版本时，这才与 `resource` 不同。</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;requestResource&#34;: </span>{<span style=color:#b44>&#34;group&#34;</span>:<span style=color:#b44>&#34;apps&#34;</span>,<span style=color:#b44>&#34;version&#34;</span>:<span style=color:#b44>&#34;v1&#34;</span>,<span style=color:#b44>&#34;resource&#34;</span>:<span style=color:#b44>&#34;deployments&#34;</span>},<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># subResource（如果请求是针对 subResource 的）</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 仅当 webhook 指定了 `matchPolicy：Equivalent` 并且将对 API 服务器的原始请求转换为该 webhook 注册的版本时，这才与 `subResource` 不同。</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;requestSubResource&#34;: </span><span style=color:#b44>&#34;scale&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 被修改资源的名称</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;name&#34;: </span><span style=color:#b44>&#34;my-deployment&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 如果资源是属于名字空间（或者是名字空间对象），则这是被修改的资源的名字空间</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;namespace&#34;: </span><span style=color:#b44>&#34;my-namespace&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 操作可以是 CREATE、UPDATE、DELETE 或 CONNECT</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;operation&#34;: </span><span style=color:#b44>&#34;UPDATE&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;userInfo&#34;: </span>{<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#080;font-style:italic># 向 API 服务器发出请求的经过身份验证的用户的用户名</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>&#34;username&#34;: </span><span style=color:#b44>&#34;admin&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#080;font-style:italic># 向 API 服务器发出请求的经过身份验证的用户的 UID</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>&#34;uid&#34;: </span><span style=color:#b44>&#34;014fbff9a07c&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#080;font-style:italic># 向 API 服务器发出请求的经过身份验证的用户的组成员身份</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>&#34;groups&#34;: </span>[<span style=color:#b44>&#34;system:authenticated&#34;</span>,<span style=color:#b44>&#34;my-admin-group&#34;</span>],<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#080;font-style:italic># 向 API 服务器发出请求的用户相关的任意附加信息</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#080;font-style:italic># 该字段由 API 服务器身份验证层填充，并且如果 webhook 执行了任何 SubjectAccessReview 检查，则应将其包括在内。</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>&#34;extra&#34;: </span>{<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#b44>&#34;some-key&#34;</span>:[<span style=color:#b44>&#34;some-value1&#34;</span>,<span style=color:#bbb> </span><span style=color:#b44>&#34;some-value2&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>      </span>}<span style=color:#bbb>
</span><span style=color:#bbb>    </span>},<span style=color:#bbb>
</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># object 是被接纳的新对象。</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 对于 DELETE 操作，它为 null。</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;object&#34;: </span>{<span style=color:#b44>&#34;apiVersion&#34;</span>:<span style=color:#b44>&#34;autoscaling/v1&#34;</span>,<span style=color:#b44>&#34;kind&#34;</span>:<span style=color:#b44>&#34;Scale&#34;</span>,...},<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># oldObject 是现有对象。</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 对于 CREATE 和 CONNECT 操作，它为 null。</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;oldObject&#34;: </span>{<span style=color:#b44>&#34;apiVersion&#34;</span>:<span style=color:#b44>&#34;autoscaling/v1&#34;</span>,<span style=color:#b44>&#34;kind&#34;</span>:<span style=color:#b44>&#34;Scale&#34;</span>,...},<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># options 包含要接受的操作的选项，例如 meta.k8s.io/v CreateOptions、UpdateOptions 或 DeleteOptions。</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 对于 CONNECT 操作，它为 null。</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;options&#34;: </span>{<span style=color:#b44>&#34;apiVersion&#34;</span>:<span style=color:#b44>&#34;meta.k8s.io/v1&#34;</span>,<span style=color:#b44>&#34;kind&#34;</span>:<span style=color:#b44>&#34;UpdateOptions&#34;</span>,...},<span style=color:#bbb>
</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># dryRun 表示 API 请求正在以 `dryrun` 模式运行，并且将不会保留。</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 带有副作用的 Webhook 应该避免在 dryRun 为 true 时激活这些副作用。</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 有关更多详细信息，请参见 http://k8s.io/docs/reference/using-api/api-concepts/#make-a-dry-run-request</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;dryRun&#34;: </span><span style=color:#a2f;font-weight:700>false</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>}<span style=color:#bbb>
</span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></code></pre></div></div><div id=admissionreview-request-1 class=tab-pane role=tabpanel aria-labelledby=admissionreview-request-1><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>{<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-style:italic># v1.16 中被废弃，推荐使用 admission.k8s.io/v1</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>&#34;apiVersion&#34;: </span><span style=color:#b44>&#34;admission.k8s.io/v1beta1&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>&#34;kind&#34;: </span><span style=color:#b44>&#34;AdmissionReview&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>&#34;request&#34;: </span>{<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 唯一标识此准入回调的随机 uid</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;uid&#34;: </span><span style=color:#b44>&#34;705ab4f5-6393-11e8-b7cc-42010a800002&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 传入完全正确的 group/version/kind 对象</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;kind&#34;: </span>{<span style=color:#b44>&#34;group&#34;</span>:<span style=color:#b44>&#34;autoscaling&#34;</span>,<span style=color:#b44>&#34;version&#34;</span>:<span style=color:#b44>&#34;v1&#34;</span>,<span style=color:#b44>&#34;kind&#34;</span>:<span style=color:#b44>&#34;Scale&#34;</span>},<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 修改 resource 的完全正确的的 group/version/kind</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;resource&#34;: </span>{<span style=color:#b44>&#34;group&#34;</span>:<span style=color:#b44>&#34;apps&#34;</span>,<span style=color:#b44>&#34;version&#34;</span>:<span style=color:#b44>&#34;v1&#34;</span>,<span style=color:#b44>&#34;resource&#34;</span>:<span style=color:#b44>&#34;deployments&#34;</span>},<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># subResource（如果请求是针对 subResource 的）</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;subResource&#34;: </span><span style=color:#b44>&#34;scale&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 在对 API 服务器的原始请求中，传入对象的标准 group/version/kind。</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 仅当 Webhook 指定了 `matchPolicy：Equivalent` 并且将对 API 服务器的原始请求转换为该 Webhook 注册的版本时，这与 `kind` 不同。</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 仅由 v1.15+ API 服务器发送。</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;requestKind&#34;: </span>{<span style=color:#b44>&#34;group&#34;</span>:<span style=color:#b44>&#34;autoscaling&#34;</span>,<span style=color:#b44>&#34;version&#34;</span>:<span style=color:#b44>&#34;v1&#34;</span>,<span style=color:#b44>&#34;kind&#34;</span>:<span style=color:#b44>&#34;Scale&#34;</span>},<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 在对 API 服务器的原始请求中正在修改的资源的标准 group/version/kind</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 仅当 webhook 指定了 `matchPolicy：Equivalent` 并且将对 API 服务器的原始请求转换为 webhook 注册的版本时，这才与 `resource` 不同。</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 仅由 v1.15+ API 服务器发送。</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;requestResource&#34;: </span>{<span style=color:#b44>&#34;group&#34;</span>:<span style=color:#b44>&#34;apps&#34;</span>,<span style=color:#b44>&#34;version&#34;</span>:<span style=color:#b44>&#34;v1&#34;</span>,<span style=color:#b44>&#34;resource&#34;</span>:<span style=color:#b44>&#34;deployments&#34;</span>},<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># subResource（如果请求是针对 subResource 的）</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 仅当 webhook 指定了 `matchPolicy：Equivalent` 并且将对 API 服务器的原始请求转换为该 webhook 注册的版本时，这才与 `subResource` 不同。</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 仅由 v1.15+ API 服务器发送。</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;requestSubResource&#34;: </span><span style=color:#b44>&#34;scale&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 被修改资源的名称</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;name&#34;: </span><span style=color:#b44>&#34;my-deployment&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 如果资源是属于名字空间（或者是名字空间对象），则这是被修改的资源的名字空间</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;namespace&#34;: </span><span style=color:#b44>&#34;my-namespace&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 操作可以是 CREATE、UPDATE、DELETE 或 CONNECT</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;operation&#34;: </span><span style=color:#b44>&#34;UPDATE&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;userInfo&#34;: </span>{<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#080;font-style:italic># 向 API 服务器发出请求的经过身份验证的用户的用户名</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>&#34;username&#34;: </span><span style=color:#b44>&#34;admin&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#080;font-style:italic># 向 API 服务器发出请求的经过身份验证的用户的 UID</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>&#34;uid&#34;: </span><span style=color:#b44>&#34;014fbff9a07c&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#080;font-style:italic># 向 API 服务器发出请求的经过身份验证的用户的组成员身份</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>&#34;groups&#34;: </span>[<span style=color:#b44>&#34;system:authenticated&#34;</span>,<span style=color:#b44>&#34;my-admin-group&#34;</span>],<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#080;font-style:italic># 向 API 服务器发出请求的用户相关的任意附加信息</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:#080;font-style:italic># 该字段由 API 服务器身份验证层填充，并且如果 webhook 执行了任何 SubjectAccessReview 检查，则应将其包括在内。</span><span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>&#34;extra&#34;: </span>{<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#b44>&#34;some-key&#34;</span>:[<span style=color:#b44>&#34;some-value1&#34;</span>,<span style=color:#bbb> </span><span style=color:#b44>&#34;some-value2&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>      </span>}<span style=color:#bbb>
</span><span style=color:#bbb>    </span>},<span style=color:#bbb>
</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># object 是被接纳的新对象。</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 对于 DELETE 操作，它为 null。</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;object&#34;: </span>{<span style=color:#b44>&#34;apiVersion&#34;</span>:<span style=color:#b44>&#34;autoscaling/v1&#34;</span>,<span style=color:#b44>&#34;kind&#34;</span>:<span style=color:#b44>&#34;Scale&#34;</span>,...},<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># oldObject 是现有对象。</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 对于 CREATE 和 CONNECT 操作（对于 v1.15.0 之前版本的 API 服务器中的 DELETE 操作），它为 null。</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;oldObject&#34;: </span>{<span style=color:#b44>&#34;apiVersion&#34;</span>:<span style=color:#b44>&#34;autoscaling/v1&#34;</span>,<span style=color:#b44>&#34;kind&#34;</span>:<span style=color:#b44>&#34;Scale&#34;</span>,...},<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># options 包含要接受的操作的选项，例如 meta.k8s.io/v CreateOptions、UpdateOptions 或 DeleteOptions。</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 对于 CONNECT 操作，它为 null。</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 仅由 v1.15+ API 服务器发送。</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;options&#34;: </span>{<span style=color:#b44>&#34;apiVersion&#34;</span>:<span style=color:#b44>&#34;meta.k8s.io/v1&#34;</span>,<span style=color:#b44>&#34;kind&#34;</span>:<span style=color:#b44>&#34;UpdateOptions&#34;</span>,...},<span style=color:#bbb>
</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># dryRun 表示 API 请求正在以 `dryrun` 模式运行，并且将不会保留。</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 带有副作用的 Webhook 应该避免在 dryRun 为 true 时激活这些副作用。</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 有关更多详细信息，请参见 http://k8s.io/docs/reference/using-api/api-concepts/#make-a-dry-run-request</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;dryRun&#34;: </span><span style=color:#a2f;font-weight:700>false</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>}<span style=color:#bbb>
</span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></code></pre></div></div></div><h3 id=response>响应</h3><p>Webhook 使用 HTTP 200 状态码、<code>Content-Type: application/json</code> 和一个包含 <code>AdmissionReview</code> 对象的 JSON 序列化格式来发送响应。该 <code>AdmissionReview</code> 对象与发送的版本相同，且其中包含的 <code>response</code> 字段已被有效填充。</p><p><code>response</code> 至少必须包含以下字段：</p><ul><li><code>uid</code>，从发送到 webhook 的 <code>request.uid</code> 中复制而来</li><li><code>allowed</code>，设置为 <code>true</code> 或 <code>false</code></li></ul><p>Webhook 允许请求的最简单响应示例：</p><ul class="nav nav-tabs" id=admissionreview-response-allow role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#admissionreview-response-allow-0 role=tab aria-controls=admissionreview-response-allow-0 aria-selected=true>admission.k8s.io/v1</a></li><li class=nav-item><a data-toggle=tab class=nav-link href=#admissionreview-response-allow-1 role=tab aria-controls=admissionreview-response-allow-1>admission.k8s.io/v1beta1</a></li></ul><div class=tab-content id=admissionreview-response-allow><div id=admissionreview-response-allow-0 class="tab-pane show active" role=tabpanel aria-labelledby=admissionreview-response-allow-0><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:green;font-weight:700>&#34;apiVersion&#34;</span>: <span style=color:#b44>&#34;admission.k8s.io/v1&#34;</span>,
  <span style=color:green;font-weight:700>&#34;kind&#34;</span>: <span style=color:#b44>&#34;AdmissionReview&#34;</span>,
  <span style=color:green;font-weight:700>&#34;response&#34;</span>: {
    <span style=color:green;font-weight:700>&#34;uid&#34;</span>: <span style=color:#b44>&#34;&lt;value from request.uid&gt;&#34;</span>,
    <span style=color:green;font-weight:700>&#34;allowed&#34;</span>: <span style=color:#a2f;font-weight:700>true</span>
  }
}
</code></pre></div></div><div id=admissionreview-response-allow-1 class=tab-pane role=tabpanel aria-labelledby=admissionreview-response-allow-1><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:green;font-weight:700>&#34;apiVersion&#34;</span>: <span style=color:#b44>&#34;admission.k8s.io/v1beta1&#34;</span>,
  <span style=color:green;font-weight:700>&#34;kind&#34;</span>: <span style=color:#b44>&#34;AdmissionReview&#34;</span>,
  <span style=color:green;font-weight:700>&#34;response&#34;</span>: {
    <span style=color:green;font-weight:700>&#34;uid&#34;</span>: <span style=color:#b44>&#34;&lt;value from request.uid&gt;&#34;</span>,
    <span style=color:green;font-weight:700>&#34;allowed&#34;</span>: <span style=color:#a2f;font-weight:700>true</span>
  }
}
</code></pre></div></div></div><p>Webhook 禁止请求的最简单响应示例：</p><ul class="nav nav-tabs" id=admissionreview-response-forbid-minimal role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#admissionreview-response-forbid-minimal-0 role=tab aria-controls=admissionreview-response-forbid-minimal-0 aria-selected=true>admission.k8s.io/v1</a></li><li class=nav-item><a data-toggle=tab class=nav-link href=#admissionreview-response-forbid-minimal-1 role=tab aria-controls=admissionreview-response-forbid-minimal-1>admission.k8s.io/v1beta1</a></li></ul><div class=tab-content id=admissionreview-response-forbid-minimal><div id=admissionreview-response-forbid-minimal-0 class="tab-pane show active" role=tabpanel aria-labelledby=admissionreview-response-forbid-minimal-0><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:green;font-weight:700>&#34;apiVersion&#34;</span>: <span style=color:#b44>&#34;admission.k8s.io/v1&#34;</span>,
  <span style=color:green;font-weight:700>&#34;kind&#34;</span>: <span style=color:#b44>&#34;AdmissionReview&#34;</span>,
  <span style=color:green;font-weight:700>&#34;response&#34;</span>: {
    <span style=color:green;font-weight:700>&#34;uid&#34;</span>: <span style=color:#b44>&#34;&lt;value from request.uid&gt;&#34;</span>,
    <span style=color:green;font-weight:700>&#34;allowed&#34;</span>: <span style=color:#a2f;font-weight:700>false</span>
  }
}
</code></pre></div></div><div id=admissionreview-response-forbid-minimal-1 class=tab-pane role=tabpanel aria-labelledby=admissionreview-response-forbid-minimal-1><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:green;font-weight:700>&#34;apiVersion&#34;</span>: <span style=color:#b44>&#34;admission.k8s.io/v1beta1&#34;</span>,
  <span style=color:green;font-weight:700>&#34;kind&#34;</span>: <span style=color:#b44>&#34;AdmissionReview&#34;</span>,
  <span style=color:green;font-weight:700>&#34;response&#34;</span>: {
    <span style=color:green;font-weight:700>&#34;uid&#34;</span>: <span style=color:#b44>&#34;&lt;value from request.uid&gt;&#34;</span>,
    <span style=color:green;font-weight:700>&#34;allowed&#34;</span>: <span style=color:#a2f;font-weight:700>false</span>
  }
}
</code></pre></div></div></div><p>当拒绝请求时，Webhook 可以使用 <code>status</code> 字段自定义 http 响应码和返回给用户的消息。
有关状态类型的详细信息，请参见
<a href=/docs/reference/generated/kubernetes-api/v1.20/#status-v1-meta>API 文档</a>。
禁止请求的响应示例，它定制了向用户显示的 HTTP 状态码和消息：</p><ul class="nav nav-tabs" id=admissionreview-response-forbid-details role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#admissionreview-response-forbid-details-0 role=tab aria-controls=admissionreview-response-forbid-details-0 aria-selected=true>admission.k8s.io/v1</a></li><li class=nav-item><a data-toggle=tab class=nav-link href=#admissionreview-response-forbid-details-1 role=tab aria-controls=admissionreview-response-forbid-details-1>admission.k8s.io/v1beta1</a></li></ul><div class=tab-content id=admissionreview-response-forbid-details><div id=admissionreview-response-forbid-details-0 class="tab-pane show active" role=tabpanel aria-labelledby=admissionreview-response-forbid-details-0><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:green;font-weight:700>&#34;apiVersion&#34;</span>: <span style=color:#b44>&#34;admission.k8s.io/v1&#34;</span>,
  <span style=color:green;font-weight:700>&#34;kind&#34;</span>: <span style=color:#b44>&#34;AdmissionReview&#34;</span>,
  <span style=color:green;font-weight:700>&#34;response&#34;</span>: {
    <span style=color:green;font-weight:700>&#34;uid&#34;</span>: <span style=color:#b44>&#34;&lt;value from request.uid&gt;&#34;</span>,
    <span style=color:green;font-weight:700>&#34;allowed&#34;</span>: <span style=color:#a2f;font-weight:700>false</span>,
    <span style=color:green;font-weight:700>&#34;status&#34;</span>: {
      <span style=color:green;font-weight:700>&#34;code&#34;</span>: <span style=color:#666>403</span>,
      <span style=color:green;font-weight:700>&#34;message&#34;</span>: <span style=color:#b44>&#34;You cannot do this because it is Tuesday and your name starts with A&#34;</span>
    }
  }
}
</code></pre></div></div><div id=admissionreview-response-forbid-details-1 class=tab-pane role=tabpanel aria-labelledby=admissionreview-response-forbid-details-1><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:green;font-weight:700>&#34;apiVersion&#34;</span>: <span style=color:#b44>&#34;admission.k8s.io/v1beta1&#34;</span>,
  <span style=color:green;font-weight:700>&#34;kind&#34;</span>: <span style=color:#b44>&#34;AdmissionReview&#34;</span>,
  <span style=color:green;font-weight:700>&#34;response&#34;</span>: {
    <span style=color:green;font-weight:700>&#34;uid&#34;</span>: <span style=color:#b44>&#34;&lt;value from request.uid&gt;&#34;</span>,
    <span style=color:green;font-weight:700>&#34;allowed&#34;</span>: <span style=color:#a2f;font-weight:700>false</span>,
    <span style=color:green;font-weight:700>&#34;status&#34;</span>: {
      <span style=color:green;font-weight:700>&#34;code&#34;</span>: <span style=color:#666>403</span>,
      <span style=color:green;font-weight:700>&#34;message&#34;</span>: <span style=color:#b44>&#34;You cannot do this because it is Tuesday and your name starts with A&#34;</span>
    }
  }
}
</code></pre></div></div></div><p>当允许请求时，mutating准入 Webhook 也可以选择修改传入的对象。
这是通过在响应中使用 <code>patch</code> 和 <code>patchType</code> 字段来完成的。
当前唯一支持的 <code>patchType</code> 是 <code>JSONPatch</code>。
有关更多详细信息，请参见 <a href=https://jsonpatch.com/>JSON patch</a>。
对于 <code>patchType: JSONPatch</code>，<code>patch</code> 字段包含一个以 base64 编码的 JSON patch 操作数组。</p><p>例如，设置 <code>spec.replicas</code> 的单个补丁操作将是
<code>[{"op": "add", "path": "/spec/replicas", "value": 3}]</code>。</p><p>如果以 Base64 形式编码，结果将是
<code>W3sib3AiOiAiYWRkIiwgInBhdGgiOiAiL3NwZWMvcmVwbGljYXMiLCAidmFsdWUiOiAzfV0=</code></p><p>因此，添加该标签的 webhook 响应为：<ul class="nav nav-tabs" id=admissionreview-response-modify role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#admissionreview-response-modify-0 role=tab aria-controls=admissionreview-response-modify-0 aria-selected=true>admission.k8s.io/v1</a></li><li class=nav-item><a data-toggle=tab class=nav-link href=#admissionreview-response-modify-1 role=tab aria-controls=admissionreview-response-modify-1>admission.k8s.io/v1beta1</a></li></ul><div class=tab-content id=admissionreview-response-modify><div id=admissionreview-response-modify-0 class="tab-pane show active" role=tabpanel aria-labelledby=admissionreview-response-modify-0><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:green;font-weight:700>&#34;apiVersion&#34;</span>: <span style=color:#b44>&#34;admission.k8s.io/v1&#34;</span>,
  <span style=color:green;font-weight:700>&#34;kind&#34;</span>: <span style=color:#b44>&#34;AdmissionReview&#34;</span>,
  <span style=color:green;font-weight:700>&#34;response&#34;</span>: {
    <span style=color:green;font-weight:700>&#34;uid&#34;</span>: <span style=color:#b44>&#34;&lt;value from request.uid&gt;&#34;</span>,
    <span style=color:green;font-weight:700>&#34;allowed&#34;</span>: <span style=color:#a2f;font-weight:700>true</span>,
    <span style=color:green;font-weight:700>&#34;patchType&#34;</span>: <span style=color:#b44>&#34;JSONPatch&#34;</span>,
    <span style=color:green;font-weight:700>&#34;patch&#34;</span>: <span style=color:#b44>&#34;W3sib3AiOiAiYWRkIiwgInBhdGgiOiAiL3NwZWMvcmVwbGljYXMiLCAidmFsdWUiOiAzfV0=&#34;</span>
  }
}
</code></pre></div></div><div id=admissionreview-response-modify-1 class=tab-pane role=tabpanel aria-labelledby=admissionreview-response-modify-1><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:green;font-weight:700>&#34;apiVersion&#34;</span>: <span style=color:#b44>&#34;admission.k8s.io/v1beta1&#34;</span>,
  <span style=color:green;font-weight:700>&#34;kind&#34;</span>: <span style=color:#b44>&#34;AdmissionReview&#34;</span>,
  <span style=color:green;font-weight:700>&#34;response&#34;</span>: {
    <span style=color:green;font-weight:700>&#34;uid&#34;</span>: <span style=color:#b44>&#34;&lt;value from request.uid&gt;&#34;</span>,
    <span style=color:green;font-weight:700>&#34;allowed&#34;</span>: <span style=color:#a2f;font-weight:700>true</span>,
    <span style=color:green;font-weight:700>&#34;patchType&#34;</span>: <span style=color:#b44>&#34;JSONPatch&#34;</span>,
    <span style=color:green;font-weight:700>&#34;patch&#34;</span>: <span style=color:#b44>&#34;W3sib3AiOiAiYWRkIiwgInBhdGgiOiAiL3NwZWMvcmVwbGljYXMiLCAidmFsdWUiOiAzfV0=&#34;</span>
  }
}
</code></pre></div></div></div></p><h2 id=webhook-configuration>Webhook 配置</h2><p>要注册准入 Webhook，请创建 <code>MutatingWebhookConfiguration</code> 或
<code>ValidatingWebhookConfiguration</code> API 对象。</p><p>每种配置可以包含一个或多个 Webhook。如果在单个配置中指定了多个
Webhook，则应为每个 webhook 赋予一个唯一的名称。
这在 <code>admissionregistration.k8s.io/v1</code> 中是必需的，但是在使用
<code>admissionregistration.k8s.io/v1beta1</code> 时强烈建议使用，
以使生成的审核日志和指标更易于与活动配置相匹配。</p><p>每个 Webhook 定义以下内容。</p><h3 id=matching-requests-rules>匹配请求-规则</h3><p>每个 webhook 必须指定用于确定是否应将对 apiserver 的请求发送到 webhook 的规则列表。
每个规则都指定一个或多个 operations、apiGroups、apiVersions 和 resources 以及资源的 scope：</p><ul><li><code>operations</code> 列出一个或多个要匹配的操作。
可以是 <code>CREATE</code>、<code>UPDATE</code>、<code>DELETE</code>、<code>CONNECT</code> 或 <code>*</code> 以匹配所有内容。</li><li><code>apiGroups</code> 列出了一个或多个要匹配的 API 组。<code>""</code> 是核心 API 组。<code>"*"</code> 匹配所有 API 组。</li><li><code>apiVersions</code> 列出了一个或多个要匹配的 API 版本。<code>"*"</code> 匹配所有 API 版本。</li><li><code>resources</code> 列出了一个或多个要匹配的资源。<ul><li><code>"*"</code> 匹配所有资源，但不包括子资源。</li><li><code>"*/*"</code> 匹配所有资源，包括子资源。</li><li><code>"pods/*"</code> 匹配 pod 的所有子资源。</li><li><code>"*/status"</code> 匹配所有 status 子资源。</li></ul></li><li><code>scope</code> 指定要匹配的范围。有效值为 <code>"Cluster"</code>、<code>"Namespaced"</code> 和 <code>"*"</code>。
子资源匹配其父资源的范围。在 Kubernetes v1.14+ 版本中才被支持。
默认值为 <code>"*"</code>，对应 1.14 版本之前的行为。<ul><li><code>"Cluster"</code> 表示只有集群作用域的资源才能匹配此规则（API 对象 Namespace 是集群作用域的）。</li><li><code>"Namespaced"</code> 意味着仅具有名字空间的资源才符合此规则。</li><li><code>"*"</code> 表示没有范围限制。</li></ul></li></ul><p>如果传入请求与任何 Webhook 规则的指定操作、组、版本、资源和范围匹配，则该请求将发送到 Webhook。</p><p>以下是可用于指定应拦截哪些资源的规则的其他示例。</p><p>匹配针对 <code>apps/v1</code> 和 <code>apps/v1beta1</code> 组中 <code>deployments</code> 和 <code>replicasets</code>
资源的 <code>CREATE</code> 或 <code>UPDATE</code> 请求：</p><ul class="nav nav-tabs" id=validatingwebhookconfiguration-rules-1 role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#validatingwebhookconfiguration-rules-1-0 role=tab aria-controls=validatingwebhookconfiguration-rules-1-0 aria-selected=true>admissionregistration.k8s.io/v1</a></li><li class=nav-item><a data-toggle=tab class=nav-link href=#validatingwebhookconfiguration-rules-1-1 role=tab aria-controls=validatingwebhookconfiguration-rules-1-1>admissionregistration.k8s.io/v1beta1</a></li></ul><div class=tab-content id=validatingwebhookconfiguration-rules-1><div id=validatingwebhookconfiguration-rules-1-0 class="tab-pane show active" role=tabpanel aria-labelledby=validatingwebhookconfiguration-rules-1-0><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>ValidatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>rules</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>operations</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;CREATE&#34;</span>,<span style=color:#bbb> </span><span style=color:#b44>&#34;UPDATE&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiGroups</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;apps&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiVersions</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;v1&#34;</span>,<span style=color:#bbb> </span><span style=color:#b44>&#34;v1beta1&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>resources</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;deployments&#34;</span>,<span style=color:#bbb> </span><span style=color:#b44>&#34;replicasets&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>scope</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;Namespaced&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div></div><div id=validatingwebhookconfiguration-rules-1-1 class=tab-pane role=tabpanel aria-labelledby=validatingwebhookconfiguration-rules-1-1><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#080;font-style:italic># v1.16 中被废弃，推荐使用 admissionregistration.k8s.io/v1</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1beta1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>ValidatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>rules</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>operations</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;CREATE&#34;</span>,<span style=color:#bbb> </span><span style=color:#b44>&#34;UPDATE&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiGroups</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;apps&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiVersions</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;v1&#34;</span>,<span style=color:#bbb> </span><span style=color:#b44>&#34;v1beta1&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>resources</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;deployments&#34;</span>,<span style=color:#bbb> </span><span style=color:#b44>&#34;replicasets&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>scope</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;Namespaced&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div></div></div><p>匹配所有 API 组和版本中的所有资源（但不包括子资源）的创建请求：</p><ul class="nav nav-tabs" id=validatingwebhookconfiguration-rules-2 role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#validatingwebhookconfiguration-rules-2-0 role=tab aria-controls=validatingwebhookconfiguration-rules-2-0 aria-selected=true>admissionregistration.k8s.io/v1</a></li><li class=nav-item><a data-toggle=tab class=nav-link href=#validatingwebhookconfiguration-rules-2-1 role=tab aria-controls=validatingwebhookconfiguration-rules-2-1>admissionregistration.k8s.io/v1beta1</a></li></ul><div class=tab-content id=validatingwebhookconfiguration-rules-2><div id=validatingwebhookconfiguration-rules-2-0 class="tab-pane show active" role=tabpanel aria-labelledby=validatingwebhookconfiguration-rules-2-0><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>ValidatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>rules</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>operations</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;CREATE&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiGroups</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiVersions</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>resources</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>scope</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;*&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div></div><div id=validatingwebhookconfiguration-rules-2-1 class=tab-pane role=tabpanel aria-labelledby=validatingwebhookconfiguration-rules-2-1><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#080;font-style:italic># v1.16 中被废弃，推荐使用 admissionregistration.k8s.io/v1</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1beta1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>ValidatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>rules</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>operations</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;CREATE&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiGroups</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiVersions</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>resources</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>scope</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;*&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div></div></div><p>匹配所有 API 组和版本中所有 <code>status</code> 子资源的更新请求：</p><ul class="nav nav-tabs" id=validatingwebhookconfiguration-rules-2 role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#validatingwebhookconfiguration-rules-2-0 role=tab aria-controls=validatingwebhookconfiguration-rules-2-0 aria-selected=true>admissionregistration.k8s.io/v1</a></li><li class=nav-item><a data-toggle=tab class=nav-link href=#validatingwebhookconfiguration-rules-2-1 role=tab aria-controls=validatingwebhookconfiguration-rules-2-1>admissionregistration.k8s.io/v1beta1</a></li></ul><div class=tab-content id=validatingwebhookconfiguration-rules-2><div id=validatingwebhookconfiguration-rules-2-0 class="tab-pane show active" role=tabpanel aria-labelledby=validatingwebhookconfiguration-rules-2-0><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>ValidatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>rules</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>operations</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;CREATE&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiGroups</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiVersions</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>resources</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>scope</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;*&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div></div><div id=validatingwebhookconfiguration-rules-2-1 class=tab-pane role=tabpanel aria-labelledby=validatingwebhookconfiguration-rules-2-1><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#080;font-style:italic># v1.16 中被废弃，推荐使用 admissionregistration.k8s.io/v1</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1beta1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>ValidatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>rules</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>operations</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;CREATE&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiGroups</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiVersions</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>resources</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>scope</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;*&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div></div></div><h3 id=matching-requests-objectselector>匹配请求：objectSelector</h3><p>在版本 v1.15+ 中, 通过指定 <code>objectSelector</code>，Webhook 能够根据
可能发送的对象的标签来限制哪些请求被拦截。
如果指定，则将对 <code>objectSelector</code> 和可能发送到 Webhook 的 object 和 oldObject
进行评估。如果两个对象之一与选择器匹配，则认为该请求已匹配。</p><p>空对象（对于创建操作而言为 oldObject，对于删除操作而言为 newObject），
或不能带标签的对象（例如 <code>DeploymentRollback</code> 或 <code>PodProxyOptions</code> 对象）
被认为不匹配。</p><p>仅当选择使用 webhook 时才使用对象选择器，因为最终用户可以通过设置标签来
跳过准入 Webhook。</p><p>这个例子展示了一个 mutating webhook，它将匹配带有标签 <code>foo:bar</code> 的任何资源的
<code>CREATE</code> 的操作：</p><ul class="nav nav-tabs" id=objectselector-example role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#objectselector-example-0 role=tab aria-controls=objectselector-example-0 aria-selected=true>admissionregistration.k8s.io/v1</a></li><li class=nav-item><a data-toggle=tab class=nav-link href=#objectselector-example-1 role=tab aria-controls=objectselector-example-1>admissionregistration.k8s.io/v1beta1</a></li></ul><div class=tab-content id=objectselector-example><div id=objectselector-example-0 class="tab-pane show active" role=tabpanel aria-labelledby=objectselector-example-0><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>MutatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>objectSelector</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>matchLabels</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>foo</span>:<span style=color:#bbb> </span>bar<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>rules</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>operations</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;CREATE&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiGroups</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiVersions</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>resources</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>scope</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;*&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div></div><div id=objectselector-example-1 class=tab-pane role=tabpanel aria-labelledby=objectselector-example-1><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#080;font-style:italic># v1.16 中被废弃，推荐使用 admissionregistration.k8s.io/v1</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1beta1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>MutatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>objectSelector</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>matchLabels</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>foo</span>:<span style=color:#bbb> </span>bar<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>rules</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>operations</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;CREATE&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiGroups</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiVersions</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>resources</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>scope</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;*&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div></div></div><p>有关标签选择器的更多示例，请参见<a href=/zh/docs/concepts/overview/working-with-objects/labels>标签</a>。</p><h3 id=matching-requests-namespaceselector>匹配请求：namespaceSelector</h3><p>通过指定 <code>namespaceSelector</code>，Webhook 可以根据具有名字空间的资源所处的
名字空间的标签来选择拦截哪些资源的操作。</p><p><code>namespaceSelector</code> 根据名字空间的标签是否匹配选择器，决定是否针对具名字空间的资源
（或 Namespace 对象）的请求运行 webhook。
如果对象是除 Namespace 以外的集群范围的资源，则 <code>namespaceSelector</code> 标签无效。</p><p>本例给出的修改性质的 Webhook 将匹配到对名字空间中具名字空间的资源的 <code>CREATE</code> 请求，
前提是这些资源不含值为 "0" 或 "1" 的 "runlevel" 标签：</p><ul class="nav nav-tabs" id=mutatingwebhookconfiguration-namespaceselector-1 role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#mutatingwebhookconfiguration-namespaceselector-1-0 role=tab aria-controls=mutatingwebhookconfiguration-namespaceselector-1-0 aria-selected=true>admissionregistration.k8s.io/v1</a></li><li class=nav-item><a data-toggle=tab class=nav-link href=#mutatingwebhookconfiguration-namespaceselector-1-1 role=tab aria-controls=mutatingwebhookconfiguration-namespaceselector-1-1>admissionregistration.k8s.io/v1beta1</a></li></ul><div class=tab-content id=mutatingwebhookconfiguration-namespaceselector-1><div id=mutatingwebhookconfiguration-namespaceselector-1-0 class="tab-pane show active" role=tabpanel aria-labelledby=mutatingwebhookconfiguration-namespaceselector-1-0><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>MutatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>namespaceSelector</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>matchExpressions</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span>- <span style=color:green;font-weight:700>key</span>:<span style=color:#bbb> </span>runlevel<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>operator</span>:<span style=color:#bbb> </span>NotIn<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>values</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;0&#34;</span>,<span style=color:#b44>&#34;1&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>rules</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>operations</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;CREATE&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiGroups</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiVersions</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>resources</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>scope</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;Namespaced&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div></div><div id=mutatingwebhookconfiguration-namespaceselector-1-1 class=tab-pane role=tabpanel aria-labelledby=mutatingwebhookconfiguration-namespaceselector-1-1><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#080;font-style:italic># v1.16 中被废弃，推荐使用 admissionregistration.k8s.io/v1</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1beta1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>MutatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>namespaceSelector</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>matchExpressions</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span>- <span style=color:green;font-weight:700>key</span>:<span style=color:#bbb> </span>runlevel<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>operator</span>:<span style=color:#bbb> </span>NotIn<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>values</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;0&#34;</span>,<span style=color:#b44>&#34;1&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>rules</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>operations</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;CREATE&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiGroups</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiVersions</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>resources</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>scope</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;Namespaced&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div></div></div><p>此示例显示了一个验证性质的 Webhook，它将匹配到对某名字空间中的任何具名字空间的资源的
<code>CREATE</code> 请求，前提是该名字空间具有值为 "prod" 或 "staging" 的 "environment" 标签：</p><ul class="nav nav-tabs" id=validatingwebhookconfiguration-namespaceselector-2 role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#validatingwebhookconfiguration-namespaceselector-2-0 role=tab aria-controls=validatingwebhookconfiguration-namespaceselector-2-0 aria-selected=true>admissionregistration.k8s.io/v1</a></li><li class=nav-item><a data-toggle=tab class=nav-link href=#validatingwebhookconfiguration-namespaceselector-2-1 role=tab aria-controls=validatingwebhookconfiguration-namespaceselector-2-1>admissionregistration.k8s.io/v1beta1</a></li></ul><div class=tab-content id=validatingwebhookconfiguration-namespaceselector-2><div id=validatingwebhookconfiguration-namespaceselector-2-0 class="tab-pane show active" role=tabpanel aria-labelledby=validatingwebhookconfiguration-namespaceselector-2-0><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>ValidatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>namespaceSelector</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>matchExpressions</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span>- <span style=color:green;font-weight:700>key</span>:<span style=color:#bbb> </span>environment<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>operator</span>:<span style=color:#bbb> </span>In<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>values</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;prod&#34;</span>,<span style=color:#b44>&#34;staging&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>rules</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>operations</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;CREATE&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiGroups</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiVersions</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>resources</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>scope</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;Namespaced&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div></div><div id=validatingwebhookconfiguration-namespaceselector-2-1 class=tab-pane role=tabpanel aria-labelledby=validatingwebhookconfiguration-namespaceselector-2-1><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#080;font-style:italic># v1.16 中被废弃，推荐使用 admissionregistration.k8s.io/v1</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1beta1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>ValidatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>namespaceSelector</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>matchExpressions</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span>- <span style=color:green;font-weight:700>key</span>:<span style=color:#bbb> </span>environment<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>operator</span>:<span style=color:#bbb> </span>In<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>values</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;prod&#34;</span>,<span style=color:#b44>&#34;staging&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>rules</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>operations</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;CREATE&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiGroups</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiVersions</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>resources</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;*&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>scope</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;Namespaced&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div></div></div><p>有关标签选择器的更多示例，请参见
<a href=/zh/docs/concepts/overview/working-with-objects/labels>标签</a>。</p><h3 id=matching-requests-matchpolicy>匹配请求：matchPolicy</h3><p>API 服务器可以通过多个 API 组或版本来提供对象。
例如，Kubernetes API 服务器允许通过 <code>extensions/v1beta1</code>、<code>apps/v1beta1</code>、
<code>apps/v1beta2</code> 和 <code>apps/v1</code> API 创建和修改 <code>Deployment</code> 对象。</p><p>例如，如果一个 webhook 仅为某些 API 组/版本指定了规则（例如
<code>apiGroups:["apps"], apiVersions:["v1","v1beta1"]</code>），而修改资源的请求
是通过另一个 API 组/版本（例如 <code>extensions/v1beta1</code>）发出的，
该请求将不会被发送到 Webhook。</p><p>在 v1.15+ 中，<code>matchPolicy</code> 允许 webhook 定义如何使用其 <code>rules</code> 匹配传入的请求。
允许的值为 <code>Exact</code> 或 <code>Equivalent</code>。</p><ul><li><code>Exact</code> 表示仅当请求与指定规则完全匹配时才应拦截该请求。</li><li><code>Equivalent</code> 表示如果某个请求意在修改 <code>rules</code> 中列出的资源，
即使该请求是通过其他 API 组或版本发起，也应拦截该请求。</li></ul><p>在上面给出的示例中，仅为 <code>apps/v1</code> 注册的 webhook 可以使用 <code>matchPolicy</code>：</p><ul><li><code>matchPolicy: Exact</code> 表示不会将 <code>extensions/v1beta1</code> 请求发送到 Webhook</li><li><code>matchPolicy:Equivalent</code> 表示将 <code>extensions/v1beta1</code> 请求发送到 webhook
（将对象转换为 webhook 指定的版本：<code>apps/v1</code>）</li></ul><p>建议指定 <code>Equivalent</code>，确保升级后启用 API 服务器中资源的新版本时，
Webhook 继续拦截他们期望的资源。</p><p>当 API 服务器停止提供某资源时，该资源不再被视为等同于该资源的其他仍在提供服务的版本。
例如，<code>extensions/v1beta1</code> 中的 Deployment 已被废弃，计划在 v1.16 中默认停止使用。
在这种情况下，带有 <code>apiGroups:["extensions"], apiVersions:["v1beta1"], resources: ["deployments"]</code>
规则的 Webhook 将不再拦截通过 <code>apps/v1</code> API 来创建 Deployment 的请求。
["deployments"] 规则将不再拦截通过 <code>apps/v1</code> API 创建的部署。</p><p>此示例显示了一个验证性质的 Webhook，该 Webhook 拦截对 Deployment 的修改（无论 API 组或版本是什么），
始终会发送一个 <code>apps/v1</code> 版本的 Deployment 对象：</p><ul class="nav nav-tabs" id=validatingwebhookconfiguration-matchpolicy role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#validatingwebhookconfiguration-matchpolicy-0 role=tab aria-controls=validatingwebhookconfiguration-matchpolicy-0 aria-selected=true>admissionregistration.k8s.io/v1</a></li><li class=nav-item><a data-toggle=tab class=nav-link href=#validatingwebhookconfiguration-matchpolicy-1 role=tab aria-controls=validatingwebhookconfiguration-matchpolicy-1>admissionregistration.k8s.io/v1beta1</a></li></ul><div class=tab-content id=validatingwebhookconfiguration-matchpolicy><div id=validatingwebhookconfiguration-matchpolicy-0 class="tab-pane show active" role=tabpanel aria-labelledby=validatingwebhookconfiguration-matchpolicy-0><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>ValidatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>matchPolicy</span>:<span style=color:#bbb> </span>Equivalent<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>rules</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>operations</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;CREATE&#34;</span>,<span style=color:#b44>&#34;UPDATE&#34;</span>,<span style=color:#b44>&#34;DELETE&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiGroups</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;apps&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiVersions</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;v1&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>resources</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;deployments&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>scope</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;Namespaced&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div><p>使用 <code>admissionregistration.k8s.io/v1</code> 创建的 admission webhhok 默认为 <code>Equivalent</code>。</p></div><div id=validatingwebhookconfiguration-matchpolicy-1 class=tab-pane role=tabpanel aria-labelledby=validatingwebhookconfiguration-matchpolicy-1><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#080;font-style:italic># v1.16 中被废弃，推荐使用 admissionregistration.k8s.io/v1</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1beta1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>ValidatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>matchPolicy</span>:<span style=color:#bbb> </span>Equivalent<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>rules</span>:<span style=color:#bbb>
</span><span style=color:#bbb>  </span>- <span style=color:green;font-weight:700>operations</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;CREATE&#34;</span>,<span style=color:#b44>&#34;UPDATE&#34;</span>,<span style=color:#b44>&#34;DELETE&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiGroups</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;apps&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>apiVersions</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;v1&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>resources</span>:<span style=color:#bbb> </span>[<span style=color:#b44>&#34;deployments&#34;</span>]<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>scope</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;Namespaced&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div><p>使用 <code>admissionregistration.k8s.io/v1beta1</code> 创建的准入 Webhook 默认为 <code>Exact</code>。</p></div></div><h3 id=调用-webhook>调用 Webhook</h3><p>API 服务器确定请求应发送到 webhook 后，它需要知道如何调用 webhook。
此信息在 webhook 配置的 <code>clientConfig</code> 节中指定。</p><p>Webhook 可以通过 URL 或服务引用来调用，并且可以选择包含自定义 CA 包，以用于验证 TLS 连接。</p><h4 id=url>URL</h4><p><code>url</code> 以标准 URL 形式给出 webhook 的位置（<code>scheme://host:port/path</code>）。</p><p><code>host</code> 不应引用集群中运行的服务；通过指定 <code>service</code> 字段来使用服务引用。
主机可以通过某些 apiserver 中的外部 DNS 进行解析。
（例如，<code>kube-apiserver</code> 无法解析集群内 DNS，因为这将违反分层规则）。<code>host</code> 也可以是 IP 地址。</p><p>请注意，将 <code>localhost</code> 或 <code>127.0.0.1</code> 用作 <code>host</code> 是有风险的，
除非你非常小心地在所有运行 apiserver 的、可能需要对此 webhook
进行调用的主机上运行。这样的安装可能不具有可移植性，即很难在新集群中启用。</p><p>scheme 必须为 "https"；URL 必须以 "https://" 开头。</p><p>使用用户或基本身份验证（例如："user:password@"）是不允许的。
使用片段（"#..."）和查询参数（"?..."）也是不允许的。</p><p>这是配置为调用 URL 的修改性质的 Webhook 的示例
（并且期望使用系统信任根证书来验证 TLS 证书，因此不指定 caBundle）：</p><ul class="nav nav-tabs" id=mutatingwebhookconfiguration-url role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#mutatingwebhookconfiguration-url-0 role=tab aria-controls=mutatingwebhookconfiguration-url-0 aria-selected=true>admissionregistration.k8s.io/v1</a></li><li class=nav-item><a data-toggle=tab class=nav-link href=#mutatingwebhookconfiguration-url-1 role=tab aria-controls=mutatingwebhookconfiguration-url-1>admissionregistration.k8s.io/v1beta1</a></li></ul><div class=tab-content id=mutatingwebhookconfiguration-url><div id=mutatingwebhookconfiguration-url-0 class="tab-pane show active" role=tabpanel aria-labelledby=mutatingwebhookconfiguration-url-0><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>MutatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>clientConfig</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>url</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;https://my-webhook.example.com:9443/my-webhook-path&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div></div><div id=mutatingwebhookconfiguration-url-1 class=tab-pane role=tabpanel aria-labelledby=mutatingwebhookconfiguration-url-1><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#080;font-style:italic># v1.16 中被废弃，推荐使用 admissionregistration.k8s.io/v1</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1beta1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>MutatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>clientConfig</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>url</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;https://my-webhook.example.com:9443/my-webhook-path&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div></div></div><h4 id=service-reference>服务引用</h4><p><code>clientConfig</code> 内部的 Service 是对该 Webhook 服务的引用。
如果 Webhook 在集群中运行，则应使用 <code>service</code> 而不是 <code>url</code>。
服务的 <code>namespace</code> 和 <code>name</code> 是必需的。
<code>port</code> 是可选的，默认值为 443。<code>path</code> 是可选的，默认为 "/"。</p><p>这是一个 mutating Webhook 的示例，该 mutating Webhook 配置为在子路径 "/my-path" 端口
"1234" 上调用服务，并使用自定义 CA 包针对 ServerName
<code>my-service-name.my-service-namespace.svc</code> 验证 TLS 连接：</p><ul class="nav nav-tabs" id=mutatingwebhookconfiguration-service role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#mutatingwebhookconfiguration-service-0 role=tab aria-controls=mutatingwebhookconfiguration-service-0 aria-selected=true>admissionregistration.k8s.io/v1</a></li><li class=nav-item><a data-toggle=tab class=nav-link href=#mutatingwebhookconfiguration-service-1 role=tab aria-controls=mutatingwebhookconfiguration-service-1>admissionregistration.k8s.io/v1beta1</a></li></ul><div class=tab-content id=mutatingwebhookconfiguration-service><div id=mutatingwebhookconfiguration-service-0 class="tab-pane show active" role=tabpanel aria-labelledby=mutatingwebhookconfiguration-service-0><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>MutatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>clientConfig</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>caBundle</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;Ci0tLS0tQk...&lt;base64-encoded PEM bundle containing the CA that signed the webhook&#39;s serving certificate&gt;...tLS0K&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>service</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>namespace</span>:<span style=color:#bbb> </span>my-service-namespace<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-service-name<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>path</span>:<span style=color:#bbb> </span>/my-path<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>port</span>:<span style=color:#bbb> </span><span style=color:#666>1234</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div></div><div id=mutatingwebhookconfiguration-service-1 class=tab-pane role=tabpanel aria-labelledby=mutatingwebhookconfiguration-service-1><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#080;font-style:italic># v1.16 中被废弃，推荐使用 admissionregistration.k8s.io/v1</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1beta1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>MutatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>clientConfig</span>:<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>caBundle</span>:<span style=color:#bbb> </span><span style=color:#b44>&#34;Ci0tLS0tQk...&lt;base64-encoded PEM bundle containing the CA that signed the webhook&#39;s serving certificate&gt;...tLS0K&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>service</span>:<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>namespace</span>:<span style=color:#bbb> </span>my-service-namespace<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-service-name<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>path</span>:<span style=color:#bbb> </span>/my-path<span style=color:#bbb>
</span><span style=color:#bbb>      </span><span style=color:green;font-weight:700>port</span>:<span style=color:#bbb> </span><span style=color:#666>1234</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div></div></div><h3 id=side-effects>副作用</h3><p>Webhook 通常仅对发送给他们的 <code>AdmissionReview</code> 内容进行操作。
但是，某些 Webhook 在处理 admission 请求时会进行带外更改。</p><p>进行带外更改的（产生“副作用”的） Webhook 必须具有协调机制（如控制器），
该机制定期确定事物的实际状态，并调整由准入 Webhook 修改的带外数据以反映现实情况。
这是因为对准入 Webhook 的调用不能保证所准入的对象将原样保留，或根本不保留。
以后，webhook 可以修改对象的内容，在写入存储时可能会发生冲突，或者
服务器可以在持久保存对象之前关闭电源。</p><p>此外，处理 <code>dryRun: true</code> admission 请求时，具有副作用的 Webhook 必须避免产生副作用。
一个 Webhook 必须明确指出在使用 <code>dryRun</code> 运行时不会有副作用，
否则 <code>dry-run</code> 请求将不会发送到该 Webhook，而 API 请求将会失败。</p><p>Webhook 使用 webhook 配置中的 <code>sideEffects</code> 字段显示它们是否有副作用：</p><ul><li><code>Unknown</code>：有关调用 Webhook 的副作用的信息是不可知的。
如果带有 <code>dryRun：true</code> 的请求将触发对该 Webhook 的调用，则该请求将失败，并且不会调用该 Webhook。</li><li><code>None</code>：调用 webhook 没有副作用。</li><li><code>Some</code>：调用 webhook 可能会有副作用。
如果请求具有 <code>dry-run</code> 属性将触发对此 Webhook 的调用，
则该请求将会失败，并且不会调用该 Webhook。</li><li><code>NoneOnDryRun</code>：调用 webhook 可能会有副作用，但是如果将带有 <code>dryRun: true</code>
属性的请求发送到 webhook，则 webhook 将抑制副作用（该 webhook 可识别 <code>dryRun</code>）。</li></ul><p>允许值：</p><ul><li>在 <code>admissionregistration.k8s.io/v1beta1</code> 中，<code>sideEffects</code> 可以设置为
<code>Unknown</code>、<code>None</code>、<code>Some</code> 或者 <code>NoneOnDryRun</code>，并且默认值为 <code>Unknown</code>。</li><li>在 <code>admissionregistration.k8s.io/v1</code> 中, <code>sideEffects</code> 必须设置为
<code>None</code> 或者 <code>NoneOnDryRun</code>。</li></ul><p>这是一个 validating webhook 的示例，表明它对 <code>dryRun: true</code> 请求没有副作用：</p><ul class="nav nav-tabs" id=validatingwebhookconfiguration-sideeffects role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#validatingwebhookconfiguration-sideeffects-0 role=tab aria-controls=validatingwebhookconfiguration-sideeffects-0 aria-selected=true>admissionregistration.k8s.io/v1</a></li><li class=nav-item><a data-toggle=tab class=nav-link href=#validatingwebhookconfiguration-sideeffects-1 role=tab aria-controls=validatingwebhookconfiguration-sideeffects-1>admissionregistration.k8s.io/v1beta1</a></li></ul><div class=tab-content id=validatingwebhookconfiguration-sideeffects><div id=validatingwebhookconfiguration-sideeffects-0 class="tab-pane show active" role=tabpanel aria-labelledby=validatingwebhookconfiguration-sideeffects-0><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>ValidatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>sideEffects</span>:<span style=color:#bbb> </span>NoneOnDryRun<span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div></div><div id=validatingwebhookconfiguration-sideeffects-1 class=tab-pane role=tabpanel aria-labelledby=validatingwebhookconfiguration-sideeffects-1><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#080;font-style:italic># v1.16 中被废弃，推荐使用 admissionregistration.k8s.io/v1</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1beta1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>ValidatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>sideEffects</span>:<span style=color:#bbb> </span>NoneOnDryRun<span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div></div></div><h3 id=timeouts>超时</h3><p>由于 Webhook 会增加 API 请求的延迟，因此应尽快完成自身的操作。
<code>timeoutSeconds</code> 用来配置在将调用视为失败之前，允许 API 服务器等待 Webhook 响应的时间长度。</p><p>如果超时在 Webhook 响应之前被触发，则基于<a href=#failure-policy>失败策略</a>，将忽略
Webhook 调用或拒绝 API 调用。</p><p>超时值必须设置在 1 到 30 秒之间。</p><p>这是一个自定义超时设置为 2 秒的 validating Webhook 的示例：</p><ul class="nav nav-tabs" id=validatingwebhookconfiguration-timeoutseconds role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#validatingwebhookconfiguration-timeoutseconds-0 role=tab aria-controls=validatingwebhookconfiguration-timeoutseconds-0 aria-selected=true>admissionregistration.k8s.io/v1</a></li><li class=nav-item><a data-toggle=tab class=nav-link href=#validatingwebhookconfiguration-timeoutseconds-1 role=tab aria-controls=validatingwebhookconfiguration-timeoutseconds-1>admissionregistration.k8s.io/v1beta1</a></li></ul><div class=tab-content id=validatingwebhookconfiguration-timeoutseconds><div id=validatingwebhookconfiguration-timeoutseconds-0 class="tab-pane show active" role=tabpanel aria-labelledby=validatingwebhookconfiguration-timeoutseconds-0><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>ValidatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>timeoutSeconds</span>:<span style=color:#bbb> </span><span style=color:#666>2</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div><p>使用 <code>admissionregistration.k8s.io/v1</code> 创建的准入 Webhook 默认超时为 10 秒。</p></div><div id=validatingwebhookconfiguration-timeoutseconds-1 class=tab-pane role=tabpanel aria-labelledby=validatingwebhookconfiguration-timeoutseconds-1><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#080;font-style:italic># v1.16 中被废弃，推荐使用 admissionregistration.k8s.io/v1</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1beta1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>ValidatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>timeoutSeconds</span>:<span style=color:#bbb> </span><span style=color:#666>2</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div><p>使用 <code>admissionregistration.k8s.io/v1beta1</code> 创建的准入 Webhook 默认超时为 30 秒。</p></div></div><h3 id=reinvocation-policy>再调用策略</h3><p>修改性质的准入插件（包括 Webhook）的任何一种排序方式都不会适用于所有情况。
(参见 <a href=https://issue.k8s.io/64333>https://issue.k8s.io/64333</a> 示例)。
修改性质的 Webhook 可以向对象中添加新的子结构（例如向 <code>pod</code> 中添加 <code>container</code>），
已经运行的其他修改插件可能会对这些新结构有影响
（就像在所有容器上设置 <code>imagePullPolicy</code> 一样）。</p><p>在 v1.15+ 中，允许修改性质的准入插件感应到其他插件所做的更改，
如果修改性质的 Webhook 修改了一个对象，则会重新运行内置的修改性质的准入插件，
并且修改性质的 Webhook 可以指定 <code>reinvocationPolicy</code> 来控制是否也重新调用它们。</p><p>可以将 <code>reinvocationPolicy</code> 设置为 <code>Never</code> 或 <code>IfNeeded</code>。 默认为 <code>Never</code>。</p><ul><li><code>Never</code>: 在一次准入测试中，不得多次调用 Webhook。</li><li><code>IfNeeded</code>: 如果在最初的 Webhook 调用之后被其他对象的插件修改了被接纳的对象，
则可以作为准入测试的一部分再次调用该 webhook。</li></ul><p>要注意的重要因素有：</p><ul><li>不能保证附加调用的次数恰好是一。</li><li>如果其他调用导致对该对象的进一步修改，则不能保证再次调用 Webhook。</li><li>使用此选项的 Webhook 可能会重新排序，以最大程度地减少额外调用的次数。</li><li>要在确保所有修改都完成后验证对象，请改用验证性质的 Webhook
（推荐用于有副作用的 Webhook）。</li></ul><p>这是一个修改性质的 Webhook 的示例，该 Webhook 在以后的准入插件修改对象时被重新调用：</p><ul class="nav nav-tabs" id=mutatingwebhookconfiguration-reinvocationpolicy role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#mutatingwebhookconfiguration-reinvocationpolicy-0 role=tab aria-controls=mutatingwebhookconfiguration-reinvocationpolicy-0 aria-selected=true>admissionregistration.k8s.io/v1</a></li><li class=nav-item><a data-toggle=tab class=nav-link href=#mutatingwebhookconfiguration-reinvocationpolicy-1 role=tab aria-controls=mutatingwebhookconfiguration-reinvocationpolicy-1>admissionregistration.k8s.io/v1beta1</a></li></ul><div class=tab-content id=mutatingwebhookconfiguration-reinvocationpolicy><div id=mutatingwebhookconfiguration-reinvocationpolicy-0 class="tab-pane show active" role=tabpanel aria-labelledby=mutatingwebhookconfiguration-reinvocationpolicy-0><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>MutatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>reinvocationPolicy</span>:<span style=color:#bbb> </span>IfNeeded<span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div></div><div id=mutatingwebhookconfiguration-reinvocationpolicy-1 class=tab-pane role=tabpanel aria-labelledby=mutatingwebhookconfiguration-reinvocationpolicy-1><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#080;font-style:italic># v1.16 中被废弃，推荐使用 admissionregistration.k8s.io/v1</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1beta1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>MutatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>reinvocationPolicy</span>:<span style=color:#bbb> </span>IfNeeded<span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div></div></div><p>修改性质的 Webhook 必须具有<a href=#idempotence>幂等</a>性，并且能够成功处理
已被接纳并可能被修改的对象的修改性质的 Webhook。
对于所有修改性质的准入 Webhook 都是如此，因为它们可以在对象中进行的
任何更改可能已经存在于用户提供的对象中，但是对于选择重新调用的 webhook
来说是必不可少的。</p><h3 id=failure-policy>失败策略</h3><p><code>failurePolicy</code> 定义了如何处理准入 webhook 中无法识别的错误和超时错误。允许的值为 <code>Ignore</code> 或 <code>Fail</code>。</p><ul><li><code>Ignore</code> 表示调用 webhook 的错误将被忽略并且允许 API 请求继续。</li><li><code>Fail</code> 表示调用 webhook 的错误导致准入失败并且 API 请求被拒绝。</li></ul><p>这是一个修改性质的 webhook，配置为在调用准入 Webhook 遇到错误时拒绝 API 请求：</p><ul class="nav nav-tabs" id=mutatingwebhookconfiguration-failurepolicy role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#mutatingwebhookconfiguration-failurepolicy-0 role=tab aria-controls=mutatingwebhookconfiguration-failurepolicy-0 aria-selected=true>admissionregistration.k8s.io/v1</a></li><li class=nav-item><a data-toggle=tab class=nav-link href=#mutatingwebhookconfiguration-failurepolicy-1 role=tab aria-controls=mutatingwebhookconfiguration-failurepolicy-1>admissionregistration.k8s.io/v1beta1</a></li></ul><div class=tab-content id=mutatingwebhookconfiguration-failurepolicy><div id=mutatingwebhookconfiguration-failurepolicy-0 class="tab-pane show active" role=tabpanel aria-labelledby=mutatingwebhookconfiguration-failurepolicy-0><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>MutatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>failurePolicy</span>:<span style=color:#bbb> </span>Fail<span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div><p>使用 <code>admissionregistration.k8s.io/v1beta1</code> 创建的准入 Webhook 将
<code>failurePolicy</code> 默认设置为 <code>Ignore</code>。</p></div><div id=mutatingwebhookconfiguration-failurepolicy-1 class=tab-pane role=tabpanel aria-labelledby=mutatingwebhookconfiguration-failurepolicy-1><p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#080;font-style:italic># v1.16 中被废弃，推荐使用 admissionregistration.k8s.io/v1</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>apiVersion</span>:<span style=color:#bbb> </span>admissionregistration.k8s.io/v1beta1<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>kind</span>:<span style=color:#bbb> </span>MutatingWebhookConfiguration<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#00f;font-weight:700>...</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:green;font-weight:700>webhooks</span>:<span style=color:#bbb>
</span><span style=color:#bbb></span>- <span style=color:green;font-weight:700>name</span>:<span style=color:#bbb> </span>my-webhook.example.com<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:green;font-weight:700>failurePolicy</span>:<span style=color:#bbb> </span>Fail<span style=color:#bbb>
</span><span style=color:#bbb>  </span>...<span style=color:#bbb>
</span></code></pre></div><p>使用 <code>admissionregistration.k8s.io/v1beta1</code> 创建的准入 Webhook 将
<code>failurePolicy</code> 默认设置为 <code>Ignore</code>。</p></div></div><h2 id=monitoring-admission-webhooks>监控 Admission Webhook</h2><p>API 服务器提供了监视准入 Webhook 行为的方法。这些监视机制可帮助集群管理员
回答以下问题：</p><ol><li>哪个修改性质的 webhook 改变了 API 请求中的对象？</li><li>修改性质的 Webhook 对对象做了哪些更改？</li><li>哪些 webhook 经常拒绝 API 请求？是什么原因拒绝？</li></ol><h3 id=mutating-webhook-审计注解>Mutating Webhook 审计注解</h3><p>有时，了解 API 请求中的哪个修改性质的 Webhook 使对象改变以及该
Webhook 应用了哪些更改很有用。</p><p>在 v1.16+ 中，kube-apiserver 针对每个修改性质的 Webhook 调用执行
<a href=/zh/docs/tasks/debug-application-cluster/audit/>审计</a>操作。
每个调用都会生成一个审计注解，记述请求对象是否发生改变，
可选地还可以根据 webhook 的准入响应生成一个注解，记述所应用的修补。
针对给定请求的给定执行阶段，注解被添加到审计事件中，
然后根据特定策略进行预处理并写入后端。</p><p>事件的审计级别决定了要记录哪些注解：</p><p>在 <code>Metadata</code> 或更高审计级别上，将使用 JSON 负载记录带有键名
<code>mutation.webhook.admission.k8s.io/round_{round idx}_index_{order idx}</code> 的注解，
该注解表示针对给定请求调用了 Webhook，以及该 Webhook 是否更改了对象。</p><p>例如，对于正在被重新调用的某 Webhook，所记录的注解如下。
Webhook 在 mutating Webhook 链中排在第三个位置，并且在调用期间未改变请求对象。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#080;font-style:italic># 审计事件相关记录</span><span style=color:#bbb>
</span><span style=color:#bbb></span>{<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;kind&#34;: </span><span style=color:#b44>&#34;Event&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;apiVersion&#34;: </span><span style=color:#b44>&#34;audit.k8s.io/v1&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;annotations&#34;: </span>{<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>&#34;mutation.webhook.admission.k8s.io/round_1_index_2&#34;: &#34;{\&#34;configuration\&#34;:\&#34;my-mutating-webhook-configuration.example.com\&#34;,\&#34;webhook\&#34;:\&#34;my-webhook.example.com\&#34;,\&#34;mutated\&#34;: </span><span style=color:#a2f;font-weight:700>false</span>}&#34;<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#080;font-style:italic># 其他注解</span><span style=color:#bbb>
</span><span style=color:#bbb>        </span>...<span style=color:#bbb>
</span><span style=color:#bbb>    </span>}<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 其他字段</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span>...<span style=color:#bbb>
</span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></code></pre></div><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#080;font-style:italic># 反序列化的注解值</span><span style=color:#bbb>
</span><span style=color:#bbb></span>{<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;configuration&#34;: </span><span style=color:#b44>&#34;my-mutating-webhook-configuration.example.com&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;webhook&#34;: </span><span style=color:#b44>&#34;my-webhook.example.com&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;mutated&#34;: </span><span style=color:#a2f;font-weight:700>false</span><span style=color:#bbb>
</span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></code></pre></div><p>对于在第一轮中调用的 Webhook，所记录的注解如下。
Webhook 在 mutating Webhook 链中排在第一位，并在调用期间改变了请求对象。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#080;font-style:italic># 审计事件相关记录</span><span style=color:#bbb>
</span><span style=color:#bbb></span>{<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;kind&#34;: </span><span style=color:#b44>&#34;Event&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;apiVersion&#34;: </span><span style=color:#b44>&#34;audit.k8s.io/v1&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;annotations&#34;: </span>{<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>&#34;mutation.webhook.admission.k8s.io/round_0_index_0&#34;: &#34;{\&#34;configuration\&#34;:\&#34;my-mutating-webhook-configuration.example.com\&#34;,\&#34;webhook\&#34;:\&#34;my-webhook-always-mutate.example.com\&#34;,\&#34;mutated\&#34;: </span><span style=color:#a2f;font-weight:700>true</span>}&#34;<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#080;font-style:italic># 其他注解</span><span style=color:#bbb>
</span><span style=color:#bbb>        </span>...<span style=color:#bbb>
</span><span style=color:#bbb>    </span>}<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 其他字段</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span>...<span style=color:#bbb>
</span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></code></pre></div><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#080;font-style:italic># 反序列化的注解值</span><span style=color:#bbb>
</span><span style=color:#bbb></span>{<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;configuration&#34;: </span><span style=color:#b44>&#34;my-mutating-webhook-configuration.example.com&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;webhook&#34;: </span><span style=color:#b44>&#34;my-webhook-always-mutate.example.com&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;mutated&#34;: </span><span style=color:#a2f;font-weight:700>true</span><span style=color:#bbb>
</span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></code></pre></div><p>在 <code>Request</code> 或更高审计级别上，将使用 JSON 负载记录带有键名为
<code>patch.webhook.admission.k8s.io/round_{round idx}_index_{order idx}</code> 的注解，
该注解表明针对给定请求调用了 Webhook 以及应用于请求对象之上的修改。</p><p>例如，以下是针对正在被重新调用的某 Webhook 所记录的注解。
Webhook 在修改性质的 Webhook 链中排在第四，并在其响应中包含一个 JSON 补丁，
该补丁已被应用于请求对象。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#080;font-style:italic># 审计事件相关记录</span><span style=color:#bbb>
</span><span style=color:#bbb></span>{<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;kind&#34;: </span><span style=color:#b44>&#34;Event&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;apiVersion&#34;: </span><span style=color:#b44>&#34;audit.k8s.io/v1&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;annotations&#34;: </span>{<span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:green;font-weight:700>&#34;patch.webhook.admission.k8s.io/round_1_index_3&#34;: </span><span style=color:#b44>&#34;{\&#34;configuration\&#34;:\&#34;my-other-mutating-webhook-configuration.example.com\&#34;,\&#34;webhook\&#34;:\&#34;my-webhook-always-mutate.example.com\&#34;,\&#34;patch\&#34;:[{\&#34;op\&#34;:\&#34;add\&#34;,\&#34;path\&#34;:\&#34;/data/mutation-stage\&#34;,\&#34;value\&#34;:\&#34;yes\&#34;}],\&#34;patchType\&#34;:\&#34;JSONPatch\&#34;}&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>        </span><span style=color:#080;font-style:italic># 其他注解</span><span style=color:#bbb>
</span><span style=color:#bbb>        </span>...<span style=color:#bbb>
</span><span style=color:#bbb>    </span>}<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:#080;font-style:italic># 其他字段</span><span style=color:#bbb>
</span><span style=color:#bbb>    </span>...<span style=color:#bbb>
</span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></code></pre></div><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#080;font-style:italic># 反序列化的注解值</span><span style=color:#bbb>
</span><span style=color:#bbb></span>{<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;configuration&#34;: </span><span style=color:#b44>&#34;my-other-mutating-webhook-configuration.example.com&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;webhook&#34;: </span><span style=color:#b44>&#34;my-webhook-always-mutate.example.com&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;patchType&#34;: </span><span style=color:#b44>&#34;JSONPatch&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>&#34;patch&#34;: </span>[<span style=color:#bbb>
</span><span style=color:#bbb>        </span>{<span style=color:#bbb>
</span><span style=color:#bbb>            </span><span style=color:green;font-weight:700>&#34;op&#34;: </span><span style=color:#b44>&#34;add&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>            </span><span style=color:green;font-weight:700>&#34;path&#34;: </span><span style=color:#b44>&#34;/data/mutation-stage&#34;</span>,<span style=color:#bbb>
</span><span style=color:#bbb>            </span><span style=color:green;font-weight:700>&#34;value&#34;: </span><span style=color:#b44>&#34;yes&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb>        </span>}<span style=color:#bbb>
</span><span style=color:#bbb>    </span>]<span style=color:#bbb>
</span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></code></pre></div><h3 id=准入-webhook-度量值>准入 Webhook 度量值</h3><p>Kube-apiserver 从 <code>/metrics</code> 端点公开 Prometheus 指标，这些指标可用于监控和诊断
apiserver 状态。以下指标记录了与准入 Webhook 相关的状态。</p><h4 id=apiserver-准入-webhook-拒绝次数>apiserver 准入 Webhook 拒绝次数</h4><p>有时，了解哪些准入 Webhook 经常拒绝 API 请求以及拒绝的原因是很有用的。</p><p>在 v1.16+ 中，kube-apiserver 提供了 Prometheus 计数器度量值，记录
准入 Webhook 的拒绝次数。
度量值的标签给出了 Webhook 拒绝该请求的原因：</p><ul><li><code>name</code>：拒绝请求 Webhook 的名称。</li><li><code>operation</code>：请求的操作类型可以是 <code>CREATE</code>、<code>UPDATE</code>、<code>DELETE</code> 和 <code>CONNECT</code> 其中之一。</li><li><code>type</code>：Admission webhook 类型，可以是 <code>admit</code> 和 <code>validating</code> 其中之一。</li><li><code>error_type</code>：标识在 webhook 调用期间是否发生了错误并且导致了拒绝。其值可以是以下之一：<ul><li><code>calling_webhook_error</code>：发生了来自准入 Webhook 的无法识别的错误或超时错误，
并且 webhook 的 <a href=#failure-policy>失败策略</a> 设置为 <code>Fail</code>。</li><li><code>no_error</code>：未发生错误。Webhook 在准入响应中以 <code>allowed: false</code> 值拒绝了请求。
度量标签 <code>rejection_code</code> 记录了在准入响应中设置的 <code>.status.code</code>。</li><li><code>apiserver_internal_error</code>：apiserver 发生内部错误。</li></ul></li><li><code>rejection_code</code>：当 Webhook 拒绝请求时，在准入响应中设置的 HTTP 状态码。</li></ul><p>拒绝计数指标示例：</p><pre><code># HELP apiserver_admission_webhook_rejection_count [ALPHA] Admission webhook rejection count, identified by name and broken out for each admission type (validating or admit) and operation. Additional labels specify an error type (calling_webhook_error or apiserver_internal_error if an error occurred; no_error otherwise) and optionally a non-zero rejection code if the webhook rejects the request with an HTTP status code (honored by the apiserver when the code is greater or equal to 400). Codes greater than 600 are truncated to 600, to keep the metrics cardinality bounded.
# TYPE apiserver_admission_webhook_rejection_count counter
apiserver_admission_webhook_rejection_count{error_type=&quot;calling_webhook_error&quot;,name=&quot;always-timeout-webhook.example.com&quot;,operation=&quot;CREATE&quot;,rejection_code=&quot;0&quot;,type=&quot;validating&quot;} 1
apiserver_admission_webhook_rejection_count{error_type=&quot;calling_webhook_error&quot;,name=&quot;invalid-admission-response-webhook.example.com&quot;,operation=&quot;CREATE&quot;,rejection_code=&quot;0&quot;,type=&quot;validating&quot;} 1
apiserver_admission_webhook_rejection_count{error_type=&quot;no_error&quot;,name=&quot;deny-unwanted-configmap-data.example.com&quot;,operation=&quot;CREATE&quot;,rejection_code=&quot;400&quot;,type=&quot;validating&quot;} 13
</code></pre><h2 id=最佳实践和警告>最佳实践和警告</h2><h3 id=idempotence>幂等性</h3><p>幂等的修改性质的准入 Webhook 能够成功处理已经被它接纳甚或修改的对象。
即使多次执行该准入测试，也不会产生与初次执行结果相异的结果。</p><h4 id=幂等-mutating-admission-webhook-的示例>幂等 mutating admission Webhook 的示例：</h4><ol><li>对于 <code>CREATE</code> Pod 请求，将 Pod 的字段 <code>.spec.securityContext.runAsNonRoot</code>
设置为 true，以实施安全最佳实践。</li><li>对于 <code>CREATE</code> Pod 请求，如果未设置容器的字段
<code>.spec.containers[].resources.limits</code>，设置默认资源限制值。</li><li>对于 <code>CREATE</code> pod 请求，如果 Pod 中不存在名为 <code>foo-sidecar</code> 的边车容器，
向 Pod 注入一个 <code>foo-sidecar</code> 容器。</li></ol><p>在上述情况下，可以安全地重新调用 Webhook，或接受已经设置了字段的对象。</p><h4 id=非幂等-mutating-admission-webhook-的示例>非幂等 mutating admission Webhook 的示例：</h4><ol><li>对于 <code>CREATE</code> pod 请求，注入名称为 <code>foo-sidecar</code> 并带有当前时间戳的
边车容器（例如 <code>foo-sidecar-19700101-000000</code>）。</li><li>对于 <code>CREATE/UPDATE</code> pod 请求，如果容器已设置标签 <code>"env"</code> 则拒绝，
否则将 <code>"env": "prod"</code> 标签添加到容器。</li><li>对于 <code>CREATE</code> pod 请求，盲目地添加一个名为 <code>foo-sidecar</code> 的边车容器，
而未查看 Pod 中是否已经有 <code>foo-sidecar</code> 容器。</li></ol><p>在上述第一种情况下，重新调用该 Webhook 可能导致同一个 Sidecar 容器
多次注入到 Pod 中，而且每次使用不同的容器名称。
类似地，如果 Sidecar 已存在于用户提供的 Pod 中，则 Webhook 可能注入重复的容器。</p><p>在上述第二种情况下，重新调用 Webhook 将导致 Webhook 自身输出失败。</p><p>在上述第三种情况下，重新调用 Webhook 将导致 Pod 规范中的容器重复，
从而使请求无效并被 API 服务器拒绝。</p><h3 id=拦截对象的所有版本>拦截对象的所有版本</h3><p>建议通过将 <code>.webhooks[].matchPolicy</code> 设置为 <code>Equivalent</code>，
以确保准入 Webhooks 始终拦截对象的所有版本。
建议准入 Webhooks 应该更偏向注册资源的稳定版本。
如果无法拦截对象的所有版本，可能会导致准入策略未再某些版本的请求上执行。
有关示例，请参见<a href=#matching-requests-matchpolicy>匹配请求：matchPolicy</a>。</p><h3 id=availability>可用性</h3><p>建议准入 webhook 尽快完成执行（时长通常是毫秒级），因为它们会增加 API 请求的延迟。
建议对 Webhook 使用较小的超时值。有关更多详细信息，请参见<a href=#timeouts>超时</a>。</p><p>建议 Admission Webhook 应该采用某种形式的负载均衡机制，以提供高可用性和高性能。
如果集群中正在运行 Webhook，则可以在服务后面运行多个 Webhook 后端，以利用该服务支持的负载均衡。</p><h3 id=确保看到对象的最终状态>确保看到对象的最终状态</h3><p>如果某准入 Webhook 需要保证自己能够看到对象的最终状态以实施策略，
则应该使用一个验证性质的 webhook，
因为可以通过 mutating Webhook 看到对象后对其进行修改。</p><p>例如，一个修改性质的准入Webhook 被配置为在每个 <code>CREATE</code> Pod 请求中
注入一个名称为 "foo-sidecar" 的 sidecar 容器。</p><p>如果<em>必须</em>存在边车容器，则还应配置一个验证性质的准入 Webhook 以拦截
<code>CREATE</code> Pod 请求，并验证要创建的对象中是否存在具有预期配置的名称为
"foo-sidecar" 的容器。</p><h3 id=避免自托管的-webhooks-中出现死锁>避免自托管的 Webhooks 中出现死锁</h3><p>如果集群内的 Webhook 配置能够拦截启动其自己的 Pod 所需的资源，
则该 Webhook 可能导致其自身部署时发生死锁。</p><p>例如，某修改性质的准入 Webhook 配置为仅当 Pod 中设置了某个标签
（例如 <code>"env": "prod"</code>）时，才接受 <code>CREATE</code> Pod 请求。
Webhook 服务器在未设置 <code>"env"</code> 标签的 Deployment 中运行。当运行 Webhook 服务器的
容器的节点运行不正常时，Webhook 部署尝试将容器重新调度到另一个节点。
但是，由于未设置 <code>"env"</code> 标签，因此请求将被现有的 Webhook 服务器拒绝，并且调度迁移不会发生。</p><p>建议使用 <a href=#matching-requests-namespaceselector>namespaceSelector</a> 排除
Webhook 所在的名字空间。</p><h3 id=side-effects>副作用</h3><p>建议准入 Webhook 应尽可能避免副作用，这意味着该准入 webhook 仅对发送给他们的
<code>AdmissionReview</code> 的内容起作用，并且不要进行额外更改。
如果 Webhook 没有任何副作用，则 <code>.webhooks[].sideEffects</code> 字段应设置为
<code>None</code>。</p><p>如果在准入执行期间存在副作用，则应在处理 <code>dryRun</code> 为 <code>true</code> 的 <code>AdmissionReview</code>
对象时避免产生副作用，并且其 <code>.webhooks[].sideEffects</code> 字段应设置为
<code>NoneOnDryRun</code>。更多详细信息，请参见<a href=#side-effects>副作用</a>。</p><h3 id=避免对-kube-system-名字空间进行操作>避免对 kube-system 名字空间进行操作</h3><p><code>kube-system</code> 名字空间包含由 Kubernetes 系统创建的对象，
例如用于控制平面组件的服务账号，诸如 <code>kube-dns</code> 之类的 Pod 等。
意外更改或拒绝 <code>kube-system</code> 名字空间中的请求可能会导致控制平面组件
停止运行或者导致未知行为发生。
如果你的准入 Webhook 不想修改 Kubernetes 控制平面的行为，请使用
<a href=#matching-requests-namespaceselector><code>namespaceSelector</code></a> 避免
拦截 <code>kube-system</code> 名字空间。</p><div id=pre-footer><h2>反馈</h2><p class=feedback--prompt>此页是否对您有帮助？</p><button class="btn btn-primary mb-4 feedback--yes">是</button>
<button class="btn btn-primary mb-4 feedback--no">否</button><p class="feedback--response feedback--response__hidden">感谢反馈。如果您有一个关于如何使用 Kubernetes 的特定的、需要答案的问题，可以访问
<a target=_blank rel=noopener href=https://stackoverflow.com/questions/tagged/kubernetes>Stack Overflow</a>.
在 GitHub 仓库上登记新的问题
<a class=feedback--link target=_blank rel=noopener href="https://github.com/kubernetes/website/issues/new?title=Issue%20with%20k8s.io">报告问题</a>
或者
<a class=feedback--link target=_blank rel=noopener href="https://github.com/kubernetes/website/issues/new?title=Improvement%20for%20k8s.io">提出改进建议</a>.</p></div><script>const yes=document.querySelector('.feedback--yes'),no=document.querySelector('.feedback--no');document.querySelectorAll('.feedback--link').forEach(a=>{a.href=a.href+window.location.pathname});const sendFeedback=a=>{gtag||console.log('!gtag'),gtag('event','click',{event_category:'Helpful',event_label:window.location.pathname,value:a})},disableButtons=()=>{yes.disabled=!0,yes.classList.add('feedback--button__disabled'),no.disabled=!0,no.classList.add('feedback--button__disabled')};yes.addEventListener('click',()=>{sendFeedback(1),disableButtons(),document.querySelector('.feedback--response').classList.remove('feedback--response__hidden')}),no.addEventListener('click',()=>{sendFeedback(0),disableButtons(),document.querySelector('.feedback--response').classList.remove('feedback--response__hidden')})</script><div class="text-muted mt-5 pt-3 border-top">最后修改 December 04, 2020 at 6:22 PM PST: <a href=https://github.com/kubernetes/website/commit/abab517ffc8ac705d21f7ca3e2a0c429465ef25b>[zh] Fix links in zh localization (4) (abab517ffc)</a></div></main><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/kubernetes/website/edit/master/content/zh/docs/reference/access-authn-authz/extensible-admission-controllers.md target=_blank><i class="fa fa-edit fa-fw"></i> 编辑此页</a>
<a href="https://github.com/kubernetes/website/new/master/content/zh/docs/reference/access-authn-authz/extensible-admission-controllers.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i> 创建子页面</a>
<a href="https://github.com/kubernetes/website/issues/new?title=%e5%8a%a8%e6%80%81%e5%87%86%e5%85%a5%e6%8e%a7%e5%88%b6" target=_blank><i class="fab fa-github fa-fw"></i> 提交文档问题</a>
<a id=print href=https://kubernetes.io/zh/docs/reference/access-authn-authz/_print/><i class="fa fa-print fa-fw"></i> 整节打印</a></div><nav id=TableOfContents><ul><li><a href=#什么是准入-webhook>什么是准入 Webhook？</a><ul><li><a href=#尝试准入-webhook>尝试准入 Webhook</a></li><li><a href=#prerequisites>先决条件</a></li><li><a href=#编写一个准入-webhook-服务器>编写一个准入 Webhook 服务器</a></li><li><a href=#部署准入-webhook-服务>部署准入 Webhook 服务</a></li><li><a href=#即时配置准入-webhook>即时配置准入 Webhook</a></li><li><a href=#authenticate-apiservers>对 apiservers 进行身份认证</a></li><li><a href=#request>请求</a></li><li><a href=#response>响应</a></li></ul></li><li><a href=#webhook-configuration>Webhook 配置</a><ul><li><a href=#matching-requests-rules>匹配请求-规则</a></li><li><a href=#matching-requests-objectselector>匹配请求：objectSelector</a></li><li><a href=#matching-requests-namespaceselector>匹配请求：namespaceSelector</a></li><li><a href=#matching-requests-matchpolicy>匹配请求：matchPolicy</a></li><li><a href=#调用-webhook>调用 Webhook</a></li><li><a href=#side-effects>副作用</a></li><li><a href=#timeouts>超时</a></li><li><a href=#reinvocation-policy>再调用策略</a></li><li><a href=#failure-policy>失败策略</a></li></ul></li><li><a href=#monitoring-admission-webhooks>监控 Admission Webhook</a><ul><li><a href=#mutating-webhook-审计注解>Mutating Webhook 审计注解</a></li><li><a href=#准入-webhook-度量值>准入 Webhook 度量值</a></li></ul></li><li><a href=#最佳实践和警告>最佳实践和警告</a><ul><li><a href=#idempotence>幂等性</a></li><li><a href=#拦截对象的所有版本>拦截对象的所有版本</a></li><li><a href=#availability>可用性</a></li><li><a href=#确保看到对象的最终状态>确保看到对象的最终状态</a></li><li><a href=#避免自托管的-webhooks-中出现死锁>避免自托管的 Webhooks 中出现死锁</a></li><li><a href=#side-effects>副作用</a></li><li><a href=#避免对-kube-system-名字空间进行操作>避免对 kube-system 名字空间进行操作</a></li></ul></li></ul></nav></div></div></div><footer class=d-print-none><div class=footer__links><nav><a class=text-white href=/zh/docs/home/>主页</a>
<a class=text-white href=/zh/blog/>博客</a>
<a class=text-white href=/zh/training/>培训</a>
<a class=text-white href=/zh/partners/>合作伙伴</a>
<a class=text-white href=/zh/community/>社区</a>
<a class=text-white href=/zh/case-studies/>案例分析</a></nav></div><div class=container-fluid><div class=row><div class="col-6 col-sm-2 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="User mailing list" aria-label="User mailing list"><a class=text-white target=_blank href=https://discuss.kubernetes.io><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank href=https://twitter.com/kubernetesio><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Calendar aria-label=Calendar><a class=text-white target=_blank href="https://calendar.google.com/calendar/embed?src=calendar%40kubernetes.io"><i class="fas fa-calendar-alt"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Youtube aria-label=Youtube><a class=text-white target=_blank href=https://youtube.com/kubernetescommunity><i class="fab fa-youtube"></i></a></li></ul></div><div class="col-6 col-sm-2 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank href=https://github.com/kubernetes/kubernetes><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank href=https://slack.k8s.io><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Contribute aria-label=Contribute><a class=text-white target=_blank href=https://git.k8s.io/community/contributors/guide><i class="fas fa-edit"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank href=https://stackoverflow.com/questions/tagged/kubernetes><i class="fab fa-stack-overflow"></i></a></li></ul></div><div class="col-12 col-sm-8 text-center order-sm-2"><small class=text-white>&copy; 2023 The Kubernetes 作者 | 文档发布基于 <a href=https://git.k8s.io/website/LICENSE class=light-text>CC BY 4.0</a> 授权许可</small><br><small class=text-white>Copyright &copy; 2023 Linux 基金会&reg;。保留所有权利。Linux 基金会已注册并使用商标。如需了解 Linux 基金会的商标列表，请访问<a href=https://www.linuxfoundation.org/trademark-usage class=light-text>商标使用页面</a></small><br><small class=text-white>ICP license: 京ICP备17074266号-3</small></div></div></div></footer></div><script src=/js/popper-1.14.3.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=/js/bootstrap-4.3.1.min.js integrity=sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM crossorigin=anonymous></script><script src=/js/main.min.40616251a9b6e4b689e7769be0340661efa4d7ebb73f957404e963e135b4ed52.js integrity="sha256-QGFiUam25LaJ53ab4DQGYe+k1+u3P5V0BOlj4TW07VI=" crossorigin=anonymous></script></body></html>